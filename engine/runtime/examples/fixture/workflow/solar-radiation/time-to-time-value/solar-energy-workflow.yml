# yaml-language-server: $schema=https://raw.githubusercontent.com/reearth/reearth-flow/main/engine/schema/workflow.json
id: d4e5f678-1234-5678-9012-34567890abcd
name: "Solar Energy Calculation with Precompiled WASM"
entryGraphId: d4e5f678-1234-5678-9012-34567890abce
with:
  csvFile: !include ./input-time-to-time-value.csv

graphs:
  - id: d4e5f678-1234-5678-9012-34567890abce
    name: entry_point
    nodes:
      - id: 90f40a3e-61d3-48e2-a328-e7226c2ad1ae
        name: CsvReader
        type: action
        action: CsvReader
        with:
          format: csv
          inline: |
            env.get("csvFile")

      - id: d2b4977d-e218-4628-96f2-d26407aeea14
        name: WasmSolarRadiationProcessor
        type: action
        action: WasmRuntimeExecutor
        with:
          processorType: "Attribute"
          programmingLanguage: "PrecompiledWasm"
          source: "file:///home/zw/code/rust_programming/reearth-flow/engine/target/wasm32-unknown-unknown/release/solar_radiation_calculator.wasm"

      - id: f5e66920-24c0-4c70-ae16-6be1ed3b906c
        name: CsvWriter
        type: action
        action: CsvWriter
        with:
          format: csv
          output: ./target/output-solar-energy.csv

    edges:
      - id: c064cf52-705f-443a-b2de-6795266c540d
        from: 90f40a3e-61d3-48e2-a328-e7226c2ad1ae
        to: d2b4977d-e218-4628-96f2-d26407aeea14
        fromPort: default
        toPort: default

      - id: e9c6b2a3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
        from: d2b4977d-e218-4628-96f2-d26407aeea14
        to: f5e66920-24c0-4c70-ae16-6be1ed3b906c
        fromPort: default
        toPort: default