# yaml-language-server: $schema=https://raw.githubusercontent.com/reearth/reearth-flow/main/engine/schema/workflow.json
id: 3e39d990-0a80-47df-9be9-3bf7c0068b5a
name: "PLATEAU4-DataConvert-07-brid-tun-cons-workflow"
entryGraphId: 3ee62cf6-3156-4b7f-aada-66fbe785b63a
with:
  cityGmlPath:
  codelistsPath:
  schemasPath:
  codelists:
  schemas:
  targetPackages:
    - brid
    - tun
    - cons
  workerArtifactPath:
graphs:
  - !include ../../../../graphs/plateau4/folder_and_file_path_reader.yml
  - !include ../../../../graphs/lod_splitter_with_dm.yml
  - id: 3ee62cf6-3156-4b7f-aada-66fbe785b63a
    name: entry_point
    nodes:
      - id: 90f40a3e-61d3-48e2-a328-e7226c2ad1ae
        name: FeatureCreator
        type: action
        action: FeatureCreator
        with:
          creator: |
            [
              #{
                cityGmlPath: env.get("cityGmlPath"),
                cityCode: env.get("cityCode") ?? file::extract_filename(env.get("cityGmlPath"))[0..5],
                baseCityCode: env.get("cityCode") ?? file::extract_filename(env.get("cityGmlPath"))[0..5],
                codelists: env.get("codelistsPath") ?? env.get("codelists"),
                schemas: env.get("schemasPath") ?? env.get("schemas"),
              },
            ]

      - id: d376f32b-7ce8-4721-8b9e-bfa39d71b860
        name: FolderAndFilePathReader
        type: subGraph
        subGraphId: c6863b71-953b-4d15-af56-396fc93fc617

      - id: ded2e272-e05c-4918-86b3-aa9f763da6e6
        name: FeatureReaderByCityGml
        type: action
        action: FeatureCityGmlReader
        with:
          codelistsPath: env.get("__value").codelists
          flatten: false
          dataset: |
            env.get("__value")["path"]

      - id: 4ffbb8a3-371e-4938-aa73-c142f11bb04b
        name: FeatureSorter
        type: action
        action: FeatureSorter
        with:
          attributes:
            - path
          order: ascending

      - id: 5daabfc0-2bda-4f8d-b206-d7a388469f7a
        name: AttributeFlattener
        type: action
        action: PLATEAU4.AttributeFlattener

      - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        name: AttributeManagerDmGeometricAttributeDefault
        type: action
        action: AttributeManager
        with:
          operations:
            - attribute: dm_feature_type
              method: create
              value: '""'
            - attribute: dm_attributes
              method: create
              value: '""'
            - attribute: dm_dmCode
              method: create
              value: '""'
            - attribute: dm_dmCode_code
              method: create
              value: '""'
            - attribute: dm_geometryType
              method: create
              value: '""'
            - attribute: dm_geometryType_code
              method: create
              value: '""'
            - attribute: dm_mapLevel
              method: create
              value: '""'
            - attribute: dm_mapLevel_code
              method: create
              value: '""'
            - attribute: dm_shapeType
              method: create
              value: '""'
            - attribute: dm_shapeType_code
              method: create
              value: '""'

      - id: e1f2a3b4-c5d6-7e8f-9a0b-1c2d3e4f5a6b
        name: AttributeManagerForMerger
        type: action
        action: AttributeManager
        with:
          operations:
            - attribute: __schema_definition
              method: create
              value: |
                env.get("__value")["feature_type"]

      # DM Branch - New parallel branch for DmGeometricAttribute processing
      - id: ded2e272-e05c-4918-86b3-aa9f763da6e7
        name: FeatureReaderByCityGmlForDm
        type: action
        action: FeatureCityGmlReader
        with:
          codelistsPath: env.get("__value").codelists
          format: citygml
          flatten: true
          dataset: |
            env.get("__value")["path"]

      - id: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6f
        name: AttributeManagerPreFlattenerForDm
        type: action
        action: AttributeManager
        with:
          operations:
            - attribute: meshcode
              method: create
              value: |
                let file = file::extract_filename(env.get("__value")["path"]);
                file.split("_")[0]
            - attribute: gml_id
              method: create
              value: |
                env.get("__value")["__citygml_gml_id"] ?? env.get("__value")["gmlId"]
            - attribute: feature_type
              method: create
              value: env.get("__value")["featureType"] ?? env.get("__value")["gmlName"]

      - id: 5daabfc0-2bda-4f8d-b206-d7a388469f7b
        name: AttributeFlattenerForDm
        type: action
        action: PLATEAU4.AttributeFlattener

      - id: a1b2c3d4-e5f6-7890-abcd-ef0000000010
        name: AttributeManagerRenameCityAttrsForDm
        type: action
        action: AttributeManager
        with:
          operations:
            - attribute: cityCode
              method: rename
              value: city_code
            - attribute: cityName
              method: rename
              value: city_name

      - id: c32a279d-97be-4584-b282-4d65627b1133
        name: LodSplitterWithDmForDm
        type: subGraph
        subGraphId: 7e98d856-1438-4148-bdcb-91747ef2e405

      - id: 3e637368-48dc-48c2-aade-253d5b0cfeeb
        name: AttributeMapper
        type: action
        action: AttributeMapper
        with:
          mappers:
            - multipleExpr: |
                let result = #{};
                let val = env.get("__value");
                let exclude = [
                  "package", "fileIndex", "extension", "root", "gmlRootId", "udxDirs", "cityGmlPath",
                  "schemas", "dirCodelists", "dirSchemas", "gmlName", "codelists", "maxLod", "dirRoot",
                  "path", "cityCode", "cityName", "gmlId"
                ];
                for key in val.keys() {
                  if !exclude.contains(key) {
                    result[key] = val[key];
                  }
                }
                result
            - attribute: gml_id
              valueAttribute: gmlId
            - attribute: meshcode
              expr: |
                file::extract_filename_without_ext(env.get("__value")["path"]).split("_")[0]
            - attribute: feature_type
              expr: |
                env.get("__citygml_feature_type")
            - attribute: city_code
              valueAttribute: cityCode
            - attribute: city_name
              valueAttribute: cityName
            - attribute: __package
              valueAttribute: package

      - id: c32a279d-97be-4584-b282-4d65627b1132
        name: FeatureLodFilter
        type: action
        action: FeatureLodFilter
        with:
          filterKey: city_code

      # DmGeometricAttribute processing pipeline
      - id: a1b2c3d4-e5f6-7890-abcd-ef1234567891
        name: AttributeManagerByDmGeometricAttribute
        type: action
        action: AttributeManager
        with:
          operations:
            - attribute: cityCode
              method: rename
              value: city_code
            - attribute: cityName
              method: rename
              value: city_name
            - attribute: package
              method: rename
              value: __package
            - attribute: baseCityCode
              method: remove
            - attribute: lod
              method: remove
            - attribute: gmlId
              method: remove
            - attribute: gmlPropertyName
              method: remove
            - attribute: fileIndex
              method: remove
            - attribute: root
              method: remove
            - attribute: cityGmlPath
              method: remove
            - attribute: admin
              method: remove
            - attribute: area
              method: remove
            - attribute: extension
              method: remove
            - attribute: dirRoot
              method: remove
            - attribute: gmlRootId
              method: remove
            - attribute: maxLod
              method: remove
            - attribute: dirSchemas
              method: remove
            - attribute: dirCodelists
              method: remove
            - attribute: path
              method: remove
            - attribute: name
              method: remove
            - attribute: udxDirs
              method: remove
            - attribute: featureType
              method: remove
            - attribute: gmlName
              method: remove
            - attribute: codelists
              method: remove
            - attribute: schemas
              method: remove

      - id: f2a3b4c5-d6e7-8f9a-0b1c-2d3e4f5a6b7c
        name: FeatureMergerForAttributes
        type: action
        action: FeatureMerger
        with:
          requestorAttribute:
            - gml_id
          supplierAttribute:
            - gml_id

      - id: b2c3d4e5-f6a7-8901-bcde-f12345678902
        name: FeatureSorterDmGeometricAttribute
        type: action
        action: FeatureSorter
        with:
          attributes:
            - __package
          order: ascending

      - id: c3d4e5f6-a7b8-9012-cdef-123456789013
        name: TwoDimensionForcerDmGeometricAttribute
        type: action
        action: TwoDimensionForcer

      - id: d4e5f6a7-b8c9-0123-def1-234567890124
        name: MVTWriterDmGeometricAttribute
        type: action
        action: MVTWriter
        with:
          layerName: |
            let pkg = env.get("__value")["__package"];
            if pkg == "brid" {
              "Bridge"
            } else if pkg == "tun" {
              "Tunnel"
            } else if pkg == "cons" {
              "OtherConstruction"
            } else {
              pkg
            }
          minZoom: 8
          maxZoom: 18
          extent: 65536
          output: |
            file::join_path(env.get("workerArtifactPath"), env.get("__value")["__package"] + "_dm_geometric_attributes")
          compressOutput: |
            let artifact = env.get("workerArtifactPath");
            let pkg = env.get("__value")["__package"];
            let city_gml = file::extract_filename_without_ext(env.get("cityGmlPath"));
            if city_gml.ends_with("_" + pkg) {
              city_gml = city_gml.sub_string(0, city_gml.len() - pkg.len() - 1);
            }
            file::join_path(artifact, city_gml + "_" + pkg + "_dm_geometric_attributes.zip")
          skipUnexposedAttributes: true
          colonToUnderscore: true

      # LOD1 processing pipeline
      - id: 8b05f9d4-1cb2-4071-a1da-c968431bc0ec
        name: VerticalReprojectorByLod1
        type: action
        action: VerticalReprojector
        with:
          reprojectorType: jgd2011ToWgs84

      # LOD2 processing pipeline
      - id: 8b05f9d4-1cb2-4071-a1da-c968431bc0d2
        name: VerticalReprojectorByLod2
        type: action
        action: VerticalReprojector
        with:
          reprojectorType: jgd2011ToWgs84

      # LOD3 processing pipeline
      - id: 8b05f9d4-1cb2-4071-a1da-c968431bc0d4
        name: VerticalReprojectorByLod3
        type: action
        action: VerticalReprojector
        with:
          reprojectorType: jgd2011ToWgs84

      # LOD4 processing pipeline
      - id: c4e5f6a7-b8c9-4d0e-1f2a-3b4c5d6e7f80
        name: FeatureFilterLod4Tunnel
        type: action
        action: FeatureFilter
        with:
          conditions:
            - expr: |
                let ft = env.get("__value").feature_type;
                ft == "tun:Tunnel" || ft == "tun:TunnelPart"
              outputPort: tunnel

      - id: 8b05f9d4-1cb2-4071-a1da-c968431bc0d6
        name: VerticalReprojectorByLod4
        type: action
        action: VerticalReprojector
        with:
          reprojectorType: jgd2011ToWgs84

      # 3D Tiles Writers - Bridge/Cons outputs (no no_texture variants per FME spec)
      - id: 41d69f1f-2a4d-4bc1-a5d0-175698273571
        name: cesium3DTilesWriterByLod1
        type: action
        action: Cesium3DTilesWriter
        with:
          minZoom: 15
          maxZoom: 18
          attachTexture: false
          output: |
            let artifact = env.get("workerArtifactPath");
            let pkg = env.get("__value")["__package"];
            file::join_path(artifact, pkg + "_lod1")
          compressOutput: |
            let artifact = env.get("workerArtifactPath");
            let pkg = env.get("__value")["__package"];
            let city_gml = file::extract_filename_without_ext(env.get("cityGmlPath"));
            if city_gml.ends_with("_" + pkg) {
              city_gml = city_gml.sub_string(0, city_gml.len() - pkg.len() - 1);
            }
            file::join_path(artifact, city_gml + "_" + pkg + "_3dtiles_lod1.zip")

      - id: a61799d5-176e-4fb9-aa64-5d350adf0bb8
        name: cesium3DTilesWriterByLod2
        type: action
        action: Cesium3DTilesWriter
        with:
          minZoom: 15
          maxZoom: 18
          attachTexture: true
          output: |
            let artifact = env.get("workerArtifactPath");
            let pkg = env.get("__value")["__package"];
            file::join_path(artifact, pkg + "_lod2")
          compressOutput: |
            let artifact = env.get("workerArtifactPath");
            let pkg = env.get("__value")["__package"];
            let city_gml = file::extract_filename_without_ext(env.get("cityGmlPath"));
            if city_gml.ends_with("_" + pkg) {
              city_gml = city_gml.sub_string(0, city_gml.len() - pkg.len() - 1);
            }
            file::join_path(artifact, city_gml + "_" + pkg + "_3dtiles_lod2.zip")

      - id: 953f5c48-9875-4c78-a1d6-4619f8fdedd2
        name: cesium3DTilesWriterByLod3
        type: action
        action: Cesium3DTilesWriter
        with:
          minZoom: 15
          maxZoom: 18
          attachTexture: true
          output: |
            let artifact = env.get("workerArtifactPath");
            let pkg = env.get("__value")["__package"];
            file::join_path(artifact, pkg + "_lod3")
          compressOutput: |
            let artifact = env.get("workerArtifactPath");
            let pkg = env.get("__value")["__package"];
            let city_gml = file::extract_filename_without_ext(env.get("cityGmlPath"));
            if city_gml.ends_with("_" + pkg) {
              city_gml = city_gml.sub_string(0, city_gml.len() - pkg.len() - 1);
            }
            file::join_path(artifact, city_gml + "_" + pkg + "_3dtiles_lod3.zip")

      - id: b0f8f2c5-bb9b-4f4f-8c27-254367031ded
        name: cesium3DTilesWriterByLod4
        type: action
        action: Cesium3DTilesWriter
        with:
          minZoom: 15
          maxZoom: 18
          attachTexture: true
          output: |
            let artifact = env.get("workerArtifactPath");
            let pkg = env.get("__value")["package"];
            file::join_path(artifact, pkg + "_lod4")
          compressOutput: |
            let artifact = env.get("workerArtifactPath");
            let pkg = env.get("__value")["package"];
            let city_gml = file::extract_filename_without_ext(env.get("cityGmlPath"));
            if city_gml.ends_with("_" + pkg) {
              city_gml = city_gml.sub_string(0, city_gml.len() - pkg.len() - 1);
            }
            file::join_path(artifact, city_gml + "_" + pkg + "_3dtiles_lod4.zip")

    edges:
      # Main processing pipeline
      - id: 5ebf24ab-1d98-49d5-8f58-eb7c18d27244
        from: 90f40a3e-61d3-48e2-a328-e7226c2ad1ae
        to: d376f32b-7ce8-4721-8b9e-bfa39d71b860
        fromPort: default
        toPort: default
      - id: 7b81f501-3f07-4cec-bf9b-9cefcebdf47d
        from: d376f32b-7ce8-4721-8b9e-bfa39d71b860
        to: ded2e272-e05c-4918-86b3-aa9f763da6e6
        fromPort: default
        toPort: default
      - id: cf845867-6ffc-4b83-9fd5-e376a22470e2
        from: ded2e272-e05c-4918-86b3-aa9f763da6e6
        to: 4ffbb8a3-371e-4938-aa73-c142f11bb04b
        fromPort: default
        toPort: default
      - id: 60ee038e-db4c-4c70-8c0a-a9cbfba726d0
        from: 4ffbb8a3-371e-4938-aa73-c142f11bb04b
        to: 5daabfc0-2bda-4f8d-b206-d7a388469f7a
        fromPort: default
        toPort: default
      - id: eeb85110-2cb8-4196-bb94-6d44c0395fb6
        from: 5daabfc0-2bda-4f8d-b206-d7a388469f7a
        to: 3e637368-48dc-48c2-aade-253d5b0cfeeb
        fromPort: default
        toPort: default
      # AttributeMapper -> FeatureLodFilter (direct connection for LOD branch)
      - id: 64540b5c-066e-449f-ace1-4af29c0e3b3c
        from: 3e637368-48dc-48c2-aade-253d5b0cfeeb
        to: c32a279d-97be-4584-b282-4d65627b1132
        fromPort: default
        toPort: default
      # AttributeMapper -> AttributeMapperForMerger
      - id: d1e2f3a4-b5c6-7d8e-9f0a-1b2c3d4e5f6a
        from: 3e637368-48dc-48c2-aade-253d5b0cfeeb
        to: e1f2a3b4-c5d6-7e8f-9a0b-1c2d3e4f5a6b
        fromPort: default
        toPort: default

      # DM Branch edges (parallel branch with flatten: true)
      # FolderAndFilePathReader -> FeatureReaderByCityGmlForDm
      - id: a1b2c3d4-e5f6-7890-abcd-ef0000000001
        from: d376f32b-7ce8-4721-8b9e-bfa39d71b860
        to: ded2e272-e05c-4918-86b3-aa9f763da6e7
        fromPort: default
        toPort: default
      # FeatureReaderByCityGmlForDm -> AttributeManagerPreFlattenerForDm
      - id: a1b2c3d4-e5f6-7890-abcd-ef0000000002
        from: ded2e272-e05c-4918-86b3-aa9f763da6e7
        to: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6f
        fromPort: default
        toPort: default
      # AttributeManagerPreFlattenerForDm -> AttributeFlattenerForDm
      - id: a1b2c3d4-e5f6-7890-abcd-ef0000000003
        from: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6f
        to: 5daabfc0-2bda-4f8d-b206-d7a388469f7b
        fromPort: default
        toPort: default
      # AttributeFlattenerForDm -> AttributeManagerRenameCityAttrsForDm
      - id: a1b2c3d4-e5f6-7890-abcd-ef0000000004
        from: 5daabfc0-2bda-4f8d-b206-d7a388469f7b
        to: a1b2c3d4-e5f6-7890-abcd-ef0000000010
        fromPort: default
        toPort: default
      # AttributeManagerRenameCityAttrsForDm -> LodSplitterWithDmForDm
      - id: a1b2c3d4-e5f6-7890-abcd-ef0000000011
        from: a1b2c3d4-e5f6-7890-abcd-ef0000000010
        to: c32a279d-97be-4584-b282-4d65627b1133
        fromPort: default
        toPort: default
      # LodSplitterWithDmForDm (DmGeometricAttribute) -> AttributeManagerByDmGeometricAttribute
      - id: a1b2c3d4-e5f6-7890-abcd-ef0000000005
        from: c32a279d-97be-4584-b282-4d65627b1133
        to: a1b2c3d4-e5f6-7890-abcd-ef1234567891
        fromPort: DmGeometricAttribute
        toPort: default

      # AttributeManagerByDmGeometricAttribute -> FeatureMerger (requestor port)
      - id: a3b4c5d6-e7f8-9a0b-1c2d-3e4f5a6b7c8d
        from: a1b2c3d4-e5f6-7890-abcd-ef1234567891
        to: f2a3b4c5-d6e7-8f9a-0b1c-2d3e4f5a6b7c
        fromPort: default
        toPort: requestor
      # AttributeMapperForMerger -> FeatureMerger (supplier port)
      - id: e2f3a4b5-c6d7-8e9f-0a1b-2c3d4e5f6a7b
        from: e1f2a3b4-c5d6-7e8f-9a0b-1c2d3e4f5a6b
        to: f2a3b4c5-d6e7-8f9a-0b1c-2d3e4f5a6b7c
        fromPort: default
        toPort: supplier
      # FeatureMerger (merged) -> FeatureSorterDmGeometricAttribute
      - id: f3a4b5c6-d7e8-9f0a-1b2c-3d4e5f6a7b8c
        from: f2a3b4c5-d6e7-8f9a-0b1c-2d3e4f5a6b7c
        to: b2c3d4e5-f6a7-8901-bcde-f12345678902
        fromPort: merged
        toPort: default
      - id: b4c5d6e7-f8a9-0b1c-2d3e-4f5a6b7c8d9e
        from: b2c3d4e5-f6a7-8901-bcde-f12345678902
        to: c3d4e5f6-a7b8-9012-cdef-123456789013
        fromPort: default
        toPort: default
      - id: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e0f
        from: c3d4e5f6-a7b8-9012-cdef-123456789013
        to: d4e5f6a7-b8c9-0123-def1-234567890124
        fromPort: default
        toPort: default

      # LOD1 pipeline edges
      - id: dde1d751-fe3e-4283-8742-ec4a61a41574
        from: c32a279d-97be-4584-b282-4d65627b1132
        to: 8b05f9d4-1cb2-4071-a1da-c968431bc0ec
        fromPort: up_to_lod1
        toPort: default
      - id: dde1d751-fe3e-4283-8742-ec4a61a41577
        from: 8b05f9d4-1cb2-4071-a1da-c968431bc0ec
        to: 41d69f1f-2a4d-4bc1-a5d0-175698273571
        fromPort: default
        toPort: default

      # LOD2 pipeline edges
      - id: 2e6bfbbd-f48f-4cb8-97ac-46fe4ecc30bb
        from: c32a279d-97be-4584-b282-4d65627b1132
        to: 8b05f9d4-1cb2-4071-a1da-c968431bc0d2
        fromPort: up_to_lod2
        toPort: default
      - id: 2e6bfbbd-f48f-4cb8-97ac-46fe4ecc30bc
        from: 8b05f9d4-1cb2-4071-a1da-c968431bc0d2
        to: a61799d5-176e-4fb9-aa64-5d350adf0bb8
        fromPort: default
        toPort: default

      # LOD3 pipeline edges
      - id: ce3f3571-053c-4487-8e85-b95fb71a49c7
        from: c32a279d-97be-4584-b282-4d65627b1132
        to: 8b05f9d4-1cb2-4071-a1da-c968431bc0d4
        fromPort: up_to_lod3
        toPort: default
      - id: ce3f3571-053c-4487-8e85-b95fb71a49c9
        from: 8b05f9d4-1cb2-4071-a1da-c968431bc0d4
        to: 953f5c48-9875-4c78-a1d6-4619f8fdedd2
        fromPort: default
        toPort: default

      # LOD4 pipeline edges
      # LodSplitterWithDmForDm (lod4) -> FeatureFilterLod4Tunnel
      - id: 841f1bed-a4d3-4425-a754-4f0dd7461eac
        from: c32a279d-97be-4584-b282-4d65627b1133
        to: c4e5f6a7-b8c9-4d0e-1f2a-3b4c5d6e7f80
        fromPort: lod4
        toPort: default
      # FeatureFilterLod4Tunnel (unfiltered) -> VerticalReprojectorByLod4
      - id: a3b4c5d6-e7f8-4a9b-0c1d-2e3f4a5b6c7d
        from: c4e5f6a7-b8c9-4d0e-1f2a-3b4c5d6e7f80
        to: 8b05f9d4-1cb2-4071-a1da-c968431bc0d6
        fromPort: unfiltered
        toPort: default
      - id: 841f1bed-a4d3-4425-a754-4f0dd7461ead
        from: 8b05f9d4-1cb2-4071-a1da-c968431bc0d6
        to: b0f8f2c5-bb9b-4f4f-8c27-254367031ded
        fromPort: default
        toPort: default

      # Schema connections (AttributeFlattener schema -> all Cesium3DTilesWriters)
      - id: 14a2d089-6d1f-4014-bb71-ff976c8e388e
        from: 5daabfc0-2bda-4f8d-b206-d7a388469f7a
        to: 41d69f1f-2a4d-4bc1-a5d0-175698273571
        fromPort: schema
        toPort: schema
      - id: e327fb17-afa9-418d-8f71-ca2589dd5352
        from: 5daabfc0-2bda-4f8d-b206-d7a388469f7a
        to: a61799d5-176e-4fb9-aa64-5d350adf0bb8
        fromPort: schema
        toPort: schema
      - id: 16173605-dccf-48bd-9f94-5b3792809d8a
        from: 5daabfc0-2bda-4f8d-b206-d7a388469f7a
        to: 953f5c48-9875-4c78-a1d6-4619f8fdedd2
        fromPort: schema
        toPort: schema
      - id: b559f3df-c4cb-4b96-95d6-9e3561add2b7
        from: 5daabfc0-2bda-4f8d-b206-d7a388469f7b
        to: b0f8f2c5-bb9b-4f4f-8c27-254367031ded
        fromPort: schema
        toPort: schema

      # Schema connection (AttributeFlattener schema -> AttributeManagerDmGeometricAttributeDefault -> MVTWriterDmGeometricAttribute)
      - id: 9f4e2d6a-3c5b-4d2a-8f7e-8c9d6eb4a3b2
        from: 5daabfc0-2bda-4f8d-b206-d7a388469f7a
        to: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        fromPort: schema
        toPort: default
      - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
        from: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        to: d4e5f6a7-b8c9-0123-def1-234567890124
        fromPort: default
        toPort: schema