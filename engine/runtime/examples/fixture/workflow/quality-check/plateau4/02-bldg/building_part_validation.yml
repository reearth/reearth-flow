id: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
name: buildingPartValidation
nodes:
  - id: c223c809-eba3-4d73-8f1b-34d27515bb17
    name: InputRouter
    type: action
    action: InputRouter
    with:
      routingPort: default

  - id: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    name: PLATEAU3.LodSplitterWithDM
    type: subGraph
    subGraphId: 7e98d856-1438-4148-bdcb-91747ef2e405

  - id: 7b9c8d4e-6f5a-4c8b-9d3e-2a5f7b8c9d4e
    name: AttributeMapperBuildingPartLod0Or1
    type: action
    action: AttributeMapper
    with:
      mappers:
        - attribute: Index
          expr: env.get("__value").fileIndex
        - attribute: Filename
          expr: env.get("__value").gmlFilename
        - attribute: Building.gml_id
          expr: env.get("__value").gmlId
        - attribute: BuildingPart.gml_id
          expr: env.get("__value").featureId
        - attribute: lod
          expr: env.get("__value").lod

  - id: 9e8f7a6b-5c4d-3e2f-1a0b-9c8d7e6f5a4b
    name: CsvWriterBuildingPartLod0Or1
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_LOD0-1のBuildingPart.csv")

  - id: 3f4e5d6c-7b8a-9c0d-1e2f-3a4b5c6d7e8f
    name: OutputRouter
    type: action
    action: OutputRouter
    with:
      routingPort: default

edges:
  - id: ed4f5a6b-7c8d-4e9f-8a1b-2c3d4e5f6a7b
    from: c223c809-eba3-4d73-8f1b-34d27515bb17
    to: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    fromPort: default
    toPort: default

  - id: f8a9b0c1-2d3e-4f5a-9b6c-7d8e9f0a1b2c
    from: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    to: 7b9c8d4e-6f5a-4c8b-9d3e-2a5f7b8c9d4e
    fromPort: lod0
    toPort: default

  - id: a1b2c3d4-5e6f-4a7b-8c9d-0e1f2a3b4c5d
    from: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    to: 7b9c8d4e-6f5a-4c8b-9d3e-2a5f7b8c9d4e
    fromPort: lod1
    toPort: default

  - id: 5c6d7e8f-9a0b-1c2d-3e4f-5a6b7c8d9e0f
    from: 7b9c8d4e-6f5a-4c8b-9d3e-2a5f7b8c9d4e
    to: 9e8f7a6b-5c4d-3e2f-1a0b-9c8d7e6f5a4b
    fromPort: default
    toPort: default

  - id: 7e8f9a0b-1c2d-3e4f-5a6b-7c8d9e0f1a2b
    from: 9e8f7a6b-5c4d-3e2f-1a0b-9c8d7e6f5a4b
    to: 3f4e5d6c-7b8a-9c0d-1e2f-3a4b5c6d7e8f
    fromPort: default
    toPort: default
