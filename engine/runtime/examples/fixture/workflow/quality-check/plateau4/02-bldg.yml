id: f2e8a945-7b3c-4d1e-9a8f-3c5b7e9d2f84
name: PLATEAU4-quality-check-02-bldg-workflow
entryGraphId: 8a6c4f2e-9b1d-4e7a-b3c5-6f8e2a4b9d7c
with:
  cityGmlPath: null
  codelists: null
  schemas: null
  objectLists: null
  outputPath: null
graphs:
- id: 7e98d856-1438-4148-bdcb-91747ef2e405
  name: PLATEAU3.LodSplitterWithDM
  nodes:
  - id: 5848465e-828f-4646-874e-e2f182b73714
    name: InputRouter
    type: action
    action: InputRouter
    with:
      routingPort: default
  - id: 278ab965-ce22-473d-98c6-c7b381c38679
    name: GeometryFilter
    type: action
    action: GeometryFilter
    with:
      filterType: none
  - id: 1787b15c-19b5-4386-a0ff-f0e58f477d07
    name: FeatureFilterByExceptSplit
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("exceptSplit") ?? false
        outputPort: exceptSplit
  - id: 8fe1a102-e3f3-40dd-b235-66e9c148830f
    name: GeometrySplitter
    type: action
    action: GeometrySplitter
  - id: 7c843a02-3b1f-40c1-8214-562e72bfb9a6
    name: FeatureFilterByLod
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("__value").lod == "0"
        outputPort: lod0
      - expr: |
          env.get("__value").lod == "1"
        outputPort: lod1
      - expr: |
          env.get("__value").lod == "2"
        outputPort: lod2
      - expr: |
          env.get("__value").lod == "3"
        outputPort: lod3
      - expr: |
          env.get("__value").lod == "4"
        outputPort: lod4
  - id: dab9d3b6-594e-40cc-9f6b-c605005e3320
    name: Lod0Router
    type: action
    action: OutputRouter
    with:
      routingPort: lod0
  - id: dab9d3b6-594e-40cc-9f6b-c605005e3321
    name: Lod1Router
    type: action
    action: OutputRouter
    with:
      routingPort: lod1
  - id: dab9d3b6-594e-40cc-9f6b-c605005e3322
    name: Lod2Router
    type: action
    action: OutputRouter
    with:
      routingPort: lod2
  - id: dab9d3b6-594e-40cc-9f6b-c605005e3323
    name: Lod3Router
    type: action
    action: OutputRouter
    with:
      routingPort: lod3
  - id: dab9d3b6-594e-40cc-9f6b-c605005e3324
    name: Lod4Router
    type: action
    action: OutputRouter
    with:
      routingPort: lod4
  edges:
  - id: fcc0d596-9169-4289-9f35-07c8cbec6f10
    from: 5848465e-828f-4646-874e-e2f182b73714
    to: 278ab965-ce22-473d-98c6-c7b381c38679
    fromPort: default
    toPort: default
  - id: 1386a662-cf02-4475-a5d2-3668a50a56b7
    from: 278ab965-ce22-473d-98c6-c7b381c38679
    to: 1787b15c-19b5-4386-a0ff-f0e58f477d07
    fromPort: unfiltered
    toPort: default
  - id: ef2f1484-6173-4f34-85bc-58bc45e31bff
    from: 1787b15c-19b5-4386-a0ff-f0e58f477d07
    to: 8fe1a102-e3f3-40dd-b235-66e9c148830f
    fromPort: unfiltered
    toPort: default
  - id: 111cc70e-e1ad-44f4-b4c8-82f7b1cf1309
    from: 8fe1a102-e3f3-40dd-b235-66e9c148830f
    to: 7c843a02-3b1f-40c1-8214-562e72bfb9a6
    fromPort: default
    toPort: default
  - id: 5857909b-7fc0-4d3e-adfa-65a5669a6646
    from: 1787b15c-19b5-4386-a0ff-f0e58f477d07
    to: 7c843a02-3b1f-40c1-8214-562e72bfb9a6
    fromPort: exceptSplit
    toPort: default
  - id: 1a802e2e-c876-42e3-b3ae-639af1bc7780
    from: 7c843a02-3b1f-40c1-8214-562e72bfb9a6
    to: dab9d3b6-594e-40cc-9f6b-c605005e3320
    fromPort: lod0
    toPort: default
  - id: 1a802e2e-c876-42e3-b3ae-639af1bc7781
    from: 7c843a02-3b1f-40c1-8214-562e72bfb9a6
    to: dab9d3b6-594e-40cc-9f6b-c605005e3321
    fromPort: lod1
    toPort: default
  - id: 1a802e2e-c876-42e3-b3ae-639af1bc7782
    from: 7c843a02-3b1f-40c1-8214-562e72bfb9a6
    to: dab9d3b6-594e-40cc-9f6b-c605005e3322
    fromPort: lod2
    toPort: default
  - id: 1a802e2e-c876-42e3-b3ae-639af1bc7783
    from: 7c843a02-3b1f-40c1-8214-562e72bfb9a6
    to: dab9d3b6-594e-40cc-9f6b-c605005e3323
    fromPort: lod3
    toPort: default
  - id: 1a802e2e-c876-42e3-b3ae-639af1bc7784
    from: 7c843a02-3b1f-40c1-8214-562e72bfb9a6
    to: dab9d3b6-594e-40cc-9f6b-c605005e3324
    fromPort: lod4
    toPort: default
- id: 8a5b1c9d-2e4f-4a3b-9c5d-1e6f8a2b4c7d
  name: PLATEAU3.SurfaceValidator3D
  nodes:
  - id: 2f8a4b1c-5e9d-4c2a-8b6e-3f7a9b2c5d8e
    name: InputRouter
    type: action
    action: InputRouter
    with:
      routingPort: default
  - id: 4c7a2b5e-8f1d-4a6c-9e2b-7a4c8e1b3f6d
    name: Noop
    type: action
    action: NoopProcessor
  - id: 6e3b8a1c-f4d7-4b9e-a2c5-8f1b4e6a9c3d
    name: SurfaceRouter
    type: action
    action: OutputRouter
    with:
      routingPort: default
  - id: 1a9c4e7b-2f5d-4e8a-b3c6-9f2a5e8b1c4d
    name: GeometryPartExtractor
    type: action
    action: GeometryPartExtractor
  - id: 3d6f9a2c-5b8e-4a1d-c7f4-2e5a8c3b6f9d
    name: TwoDimensionForcer
    type: action
    action: TwoDimensionForcer
  - id: 5c2a7f4b-8e1d-4f9c-a6e3-4b7f2a5c8e1d
    name: OrientationExtractor
    type: action
    action: OrientationExtractor
    with:
      outputAttribute: outerOrientation
  - id: 7f4a1c6e-b9d2-4c5a-e8f1-6a3c7f4b9e2d
    name: FeatureFilterByOrientation
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("__value").outerOrientation != "counter_clockwise"
        outputPort: inCorrectOrientation
  - id: 9e2b5f8a-1c4d-4a7e-f2b5-8a1e4b7c2f5d
    name: GeometryReplacer
    type: action
    action: GeometryReplacer
    with:
      sourceAttribute: dumpGeometry
  - id: 2a5c8f1b-4e7d-4b2c-a9f6-1c4e7a2b5f8d
    name: InCorrectOrientationRouter
    type: action
    action: OutputRouter
    with:
      routingPort: inCorrectOrientation
  - id: 4f8b3e6a-7d1c-4e5a-c2f9-3a6f9b4e7c1d
    name: GeometryValidator
    type: action
    action: GeometryValidator
    with:
      validationTypes:
      - duplicatePoints
      - corruptGeometry
  - id: 6a1d4f7c-9e2b-4c8a-f5e1-7c2a6f9d4e1b
    name: PlanarityFilter
    type: action
    action: PlanarityFilter
  - id: 8c5f2a9d-1b4e-4f7c-a3d8-5e2c8f1b4a7d
    name: FeatureCounter
    type: action
    action: FeatureCounter
    with:
      countStart: 0
      outputAttribute: surfaceId
  - id: 1e7a4c9b-3f6d-4a2e-c8b5-9d2a5e8c1b4f
    name: HoleCounter
    type: action
    action: HoleCounter
    with:
      outputAttribute: holeCount
  - id: 3b9f6a2d-5c8e-4d1a-f7c4-2e5b8a3f6d9c
    name: FeatureFilterByHole
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          true
        outputPort: default
      - expr: |
          env.get("__value").holeCount > 0
        outputPort: hole
  - id: 5d2c7f4a-8b1e-4c6d-a9f2-4a7d2c5f8b1e
    name: GeometryValidatorSelfIntersection
    type: action
    action: GeometryValidator
    with:
      validationTypes:
      - duplicateConsecutivePoints
      - selfIntersection
  - id: 7f5a8c3b-1d4e-4a9f-c2b7-6e3a7f5c8b1d
    name: GeometryCoercerRingNotClosed
    type: action
    action: GeometryCoercer
    with:
      coercerType: lineString
  - id: 9c1e4a7b-6f2d-4e5c-a8b1-3f6c9e1a4b7d
    name: ClosedCurveFilter
    type: action
    action: ClosedCurveFilter
  - id: 2d8a5f3c-4b7e-4c1d-f9a6-8c2d5a8f3b6e
    name: HoleExtractor
    type: action
    action: HoleExtractor
  - id: 4a6c9f2d-7e3b-4d8a-c5f2-1a4c7e9f2d5b
    name: OrientationExtractorOuterShell
    type: action
    action: OrientationExtractor
    with:
      outputAttribute: outerOrientation
  - id: 6f3b1a8e-9c4d-4a7f-e2c9-3b6f1a8e4c7d
    name: ElevationExtractorHole
    type: action
    action: ElevationExtractor
    with:
      outputAttribute: elevation
  - id: 8e7c4a1f-2d5b-4f8e-a6c3-7f4e1c8a5b2d
    name: GeometryCoercerOutershell
    type: action
    action: GeometryCoercer
    with:
      coercerType: lineString
  - id: 1c4f7a2e-5b8d-4a3c-f9e6-4c1f8a7e2b5d
    name: GeometryCoercerHole
    type: action
    action: GeometryCoercer
    with:
      coercerType: lineString
  - id: 3f5a8c1d-7e4b-4c9f-a2e7-6f3a8c1d4e7b
    name: FeatureCounterHole
    type: action
    action: FeatureCounter
    with:
      countStart: 1
      groupBy:
      - surfaceId
      outputAttribute: holeId
  - id: 5b8d1f4a-9c6e-4f2b-c8d5-1f4b8d5a9c2e
    name: FeatureMergerIntersectionbetweenInteriorAndExterior
    type: action
    action: FeatureMerger
    with:
      requestorAttribute:
      - surfaceId
      supplierAttribute:
      - surfaceId
      completeGrouped: true
  - id: 7d4e9a2c-1f5b-4d8a-e7c4-9a2d7e4c1f5b
    name: LineOnLineOverlayer
    type: action
    action: LineOnLineOverlayer
    with:
      groupBy:
      - surfaceId
      - holeId
      tolerance: 0.001
      outputAttribute: overlap
  - id: 9a6c3f8b-4e1d-4a7c-f5b9-3f8a6c9b4e1d
    name: Bufferer
    type: action
    action: Bufferer
    with:
      bufferType: area2d
      distance: 0.005
      interpolationAngle: 22.5
  - id: 2c7f4a9e-8b1d-4f6c-a3e8-7f2c4a9e1b8d
    name: AreaOnAreaOverlayerInteriorAndInterior
    type: action
    action: AreaOnAreaOverlayer
    with:
      groupBy:
      - surfaceId
      accumulationMode: useAttributesFromOneFeature
      outputAttribute: overlap
  - id: 4e1b7c5a-6f9d-4c2e-b8a5-1c4e7b5a6f9d
    name: FeatureFilterByAreaOnAreaOverlap
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("__value").overlap > 1
        outputPort: intersectionInterior
  - id: 5a3b7e9c-2f4d-4a6e-b8c1-3e7a5b9c2f4d
    name: AttributeManagerIntersectionInterior
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: issue
        method: create
        value: |
          "IntersectionBetweenInteriorAndInterior"
  - id: 6b5d8a3f-1c4e-4b7d-a9c2-5d6b8a3f1c4e
    name: OrientationExtractorIncorrectInterior
    type: action
    action: OrientationExtractor
    with:
      outputAttribute: innerOrientation
  - id: 8f2a5c7d-3e6b-4a9f-c1d4-2a8f5c7d3e6b
    name: FeatureMergerIncorrectInterior
    type: action
    action: FeatureMerger
    with:
      requestorAttribute:
      - surfaceId
      supplierAttribute:
      - surfaceId
      completeGrouped: true
  - id: 1a4d7c2f-9e5b-4d8a-f6c3-4d1a7c2f9e5b
    name: FeatureFilterByIncorrectInteriorOrientation
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("__value").innerOrientation == env.get("__value").outerOrientation
        outputPort: incorrectInterior
  - id: 4b8e2a7d-3f6c-4a1e-b9d5-7a4b8e2d3f6c
    name: AttributeManagerIncorrectInteriorOrientation
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: issue
        method: create
        value: |
          "IncorrectInteriorOrientation"
  - id: 3c6f9a1e-8d4b-4f3c-a7e2-6f3c9a1e8d4b
    name: InvalidSurfaceRouter
    type: action
    action: OutputRouter
    with:
      routingPort: invalidSurface
  edges:
  - id: 5e8b2a7f-1c4d-4e9b-a6f3-8b5e2a7f1c4d
    from: 2f8a4b1c-5e9d-4c2a-8b6e-3f7a9b2c5d8e
    to: 4c7a2b5e-8f1d-4a6c-9e2b-7a4c8e1b3f6d
    fromPort: default
    toPort: default
  - id: 7f3a6c9e-4d1b-4c7f-e2a5-3f7a6c9e4d1b
    from: 4c7a2b5e-8f1d-4a6c-9e2b-7a4c8e1b3f6d
    to: 6e3b8a1c-f4d7-4b9e-a2c5-8f1b4e6a9c3d
    fromPort: default
    toPort: default
  - id: 9d6a3f2c-8e5b-4a1d-c7f4-6a9d3f2c8e5b
    from: 4c7a2b5e-8f1d-4a6c-9e2b-7a4c8e1b3f6d
    to: 1a9c4e7b-2f5d-4e8a-b3c6-9f2a5e8b1c4d
    fromPort: default
    toPort: default
  - id: 2c5f8a1d-6e9b-4c2f-a7e4-5c2f8a1d6e9b
    from: 1a9c4e7b-2f5d-4e8a-b3c6-9f2a5e8b1c4d
    to: 3d6f9a2c-5b8e-4a1d-c7f4-2e5a8c3b6f9d
    fromPort: extracted
    toPort: default
  - id: 4a7e1c5b-9f2d-4a8e-c6f3-7e4a1c5b9f2d
    from: 3d6f9a2c-5b8e-4a1d-c7f4-2e5a8c3b6f9d
    to: 5c2a7f4b-8e1d-4f9c-a6e3-4b7f2a5c8e1d
    fromPort: default
    toPort: default
  - id: 6f9c4a2e-1d5b-4f7c-e8a1-9c6f4a2e1d5b
    from: 5c2a7f4b-8e1d-4f9c-a6e3-4b7f2a5c8e1d
    to: 7f4a1c6e-b9d2-4c5a-e8f1-6a3c7f4b9e2d
    fromPort: default
    toPort: default
  - id: 8b1e6a3f-4c7d-4b8e-a2f5-1e8b6a3f4c7d
    from: 7f4a1c6e-b9d2-4c5a-e8f1-6a3c7f4b9e2d
    to: 9e2b5f8a-1c4d-4a7e-f2b5-8a1e4b7c2f5d
    fromPort: inCorrectOrientation
    toPort: default
  - id: 1d4a7c2e-8f5b-4d1a-c9f6-4a1d7c2e8f5b
    from: 9e2b5f8a-1c4d-4a7e-f2b5-8a1e4b7c2f5d
    to: 2a5c8f1b-4e7d-4b2c-a9f6-1c4e7a2b5f8d
    fromPort: default
    toPort: default
  - id: 3f6c9a2d-7e4b-4f3c-a8e1-6c3f9a2d7e4b
    from: 1a9c4e7b-2f5d-4e8a-b3c6-9f2a5e8b1c4d
    to: 4f8b3e6a-7d1c-4e5a-c2f9-3a6f9b4e7c1d
    fromPort: extracted
    toPort: default
  - id: 5c8a1f4d-9e2b-4c5a-f7d2-8c5a1f4d9e2b
    from: 4f8b3e6a-7d1c-4e5a-c2f9-3a6f9b4e7c1d
    to: 6a1d4f7c-9e2b-4c8a-f5e1-7c2a6f9d4e1b
    fromPort: success
    toPort: default
  - id: 7e4b9f2a-1c6d-4e7b-a3f8-4b7e9f2a1c6d
    from: 6a1d4f7c-9e2b-4c8a-f5e1-7c2a6f9d4e1b
    to: 3c6f9a1e-8d4b-4f3c-a7e2-6f3c9a1e8d4b
    fromPort: notplanarity
    toPort: default
  - id: 9a2f5c8d-6e1b-4a9f-c4d7-2a9f5c8d6e1b
    from: 6a1d4f7c-9e2b-4c8a-f5e1-7c2a6f9d4e1b
    to: 8c5f2a9d-1b4e-4f7c-a3d8-5e2c8f1b4a7d
    fromPort: planarity
    toPort: default
  - id: 2d7a4c1f-5e8b-4d2a-f6c9-7a2d4c1f5e8b
    from: 8c5f2a9d-1b4e-4f7c-a3d8-5e2c8f1b4a7d
    to: 1e7a4c9b-3f6d-4a2e-c8b5-9d2a5e8c1b4f
    fromPort: default
    toPort: default
  - id: 4b6d9a3c-8f1e-4b6d-a2c7-6b4d9a3c8f1e
    from: 1e7a4c9b-3f6d-4a2e-c8b5-9d2a5e8c1b4f
    to: 3b9f6a2d-5c8e-4d1a-f7c4-2e5b8a3f6d9c
    fromPort: default
    toPort: default
  - id: 6f1c4a7e-9d2b-4f1c-e5a8-1f6c4a7e9d2b
    from: 3b9f6a2d-5c8e-4d1a-f7c4-2e5b8a3f6d9c
    to: 5d2c7f4a-8b1e-4c6d-a9f2-4a7d2c5f8b1e
    fromPort: default
    toPort: default
  - id: 8c4e7a1d-2f5b-4c8e-a1d4-4e8c7a1d2f5b
    from: 5d2c7f4a-8b1e-4c6d-a9f2-4a7d2c5f8b1e
    to: 7f5a8c3b-1d4e-4a9f-c2b7-6e3a7f5c8b1d
    fromPort: success
    toPort: default
  - id: 1a5e8c2d-6f9b-4a1e-c7d2-5a1e8c2d6f9b
    from: 5d2c7f4a-8b1e-4c6d-a9f2-4a7d2c5f8b1e
    to: 3c6f9a1e-8d4b-4f3c-a7e2-6f3c9a1e8d4b
    fromPort: failed
    toPort: default
  - id: 3d8b5a2f-7c4e-4d8b-a6f1-8b3d5a2f7c4e
    from: 7f5a8c3b-1d4e-4a9f-c2b7-6e3a7f5c8b1d
    to: 9c1e4a7b-6f2d-4e5c-a8b1-3f6c9e1a4b7d
    fromPort: default
    toPort: default
  - id: 5f2c8a6d-1e4b-4f2c-a9e4-2c5f8a6d1e4b
    from: 9c1e4a7b-6f2d-4e5c-a8b1-3f6c9e1a4b7d
    to: 3c6f9a1e-8d4b-4f3c-a7e2-6f3c9a1e8d4b
    fromPort: open
    toPort: default
  - id: 7a6f3c9b-4e2d-4a7a-c1f6-6f7a3c9b4e2d
    from: 3b9f6a2d-5c8e-4d1a-f7c4-2e5b8a3f6d9c
    to: 2d8a5f3c-4b7e-4c1d-f9a6-8c2d5a8f3b6e
    fromPort: hole
    toPort: default
  - id: 9c4a7f2e-8d1b-4c9a-f3e6-4a9c7f2e8d1b
    from: 2d8a5f3c-4b7e-4c1d-f9a6-8c2d5a8f3b6e
    to: 4a6c9f2d-7e3b-4d8a-c5f2-1a4c7e9f2d5b
    fromPort: outershell
    toPort: default
  - id: 2e7b4a1c-6f9d-4e2b-a8c5-7b2e4a1c6f9d
    from: 2d8a5f3c-4b7e-4c1d-f9a6-8c2d5a8f3b6e
    to: 6f3b1a8e-9c4d-4a7f-e2c9-3b6f1a8e4c7d
    fromPort: hole
    toPort: default
  - id: 4c8f5a3d-1e6b-4c8f-a2d5-8f4c5a3d1e6b
    from: 4a6c9f2d-7e3b-4d8a-c5f2-1a4c7e9f2d5b
    to: 8e7c4a1f-2d5b-4f8e-a6c3-7f4e1c8a5b2d
    fromPort: default
    toPort: default
  - id: 6a1d7c4f-9e2b-4a1d-c8f5-1a6d7c4f9e2b
    from: 6f3b1a8e-9c4d-4a7f-e2c9-3b6f1a8e4c7d
    to: 1c4f7a2e-5b8d-4a3c-f9e6-4c1f8a7e2b5d
    fromPort: default
    toPort: default
  - id: 8f4c1a6e-3d7b-4f8c-a5e2-4c8f1a6e3d7b
    from: 1c4f7a2e-5b8d-4a3c-f9e6-4c1f8a7e2b5d
    to: 3f5a8c1d-7e4b-4c9f-a2e7-6f3a8c1d4e7b
    fromPort: default
    toPort: default
  - id: 1d7a4c2f-8e5b-4d1a-c6f9-7a1d4c2f8e5b
    from: 8e7c4a1f-2d5b-4f8e-a6c3-7f4e1c8a5b2d
    to: 5b8d1f4a-9c6e-4f2b-c8d5-1f4b8d5a9c2e
    fromPort: default
    toPort: requestor
  - id: 3b6f9a4d-2c8e-4b3b-a7f2-6f3b9a4d2c8e
    from: 3f5a8c1d-7e4b-4c9f-a2e7-6f3a8c1d4e7b
    to: 5b8d1f4a-9c6e-4f2b-c8d5-1f4b8d5a9c2e
    fromPort: default
    toPort: supplier
  - id: 5e2c8f1a-4d7b-4e5e-c9a6-2c5e8f1a4d7b
    from: 5b8d1f4a-9c6e-4f2b-c8d5-1f4b8d5a9c2e
    to: 7d4e9a2c-1f5b-4d8a-e7c4-9a2d7e4c1f5b
    fromPort: merged
    toPort: default
  - id: 7a9d2c5f-6e8b-4a7a-f1d4-9d7a2c5f6e8b
    from: 3f5a8c1d-7e4b-4c9f-a2e7-6f3a8c1d4e7b
    to: 7d4e9a2c-1f5b-4d8a-e7c4-9a2d7e4c1f5b
    fromPort: default
    toPort: default
  - id: 9c6a5f2d-8e1b-4c9c-a4f7-6a9c5f2d8e1b
    from: 7d4e9a2c-1f5b-4d8a-e7c4-9a2d7e4c1f5b
    to: 3c6f9a1e-8d4b-4f3c-a7e2-6f3c9a1e8d4b
    fromPort: point
    toPort: default
  - id: 2f8a5c1d-7e4b-4f2f-a6c9-8a2f5c1d7e4b
    from: 6f3b1a8e-9c4d-4a7f-e2c9-3b6f1a8e4c7d
    to: 9a6c3f8b-4e1d-4a7c-f5b9-3f8a6c9b4e1d
    fromPort: default
    toPort: default
  - id: 4d1c7a5e-9f2b-4d4d-c8a3-1c4d7a5e9f2b
    from: 9a6c3f8b-4e1d-4a7c-f5b9-3f8a6c9b4e1d
    to: 2c7f4a9e-8b1d-4f6c-a3e8-7f2c4a9e1b8d
    fromPort: default
    toPort: default
  - id: 6e5b8a2f-1c4d-4e6e-b9f4-5b6e8a2f1c4d
    from: 2c7f4a9e-8b1d-4f6c-a3e8-7f2c4a9e1b8d
    to: 4e1b7c5a-6f9d-4c2e-b8a5-1c4e7b5a6f9d
    fromPort: area
    toPort: default
  - id: 8a3f6c9d-4e7b-4a8a-f2c5-3f8a6c9d4e7b
    from: 4e1b7c5a-6f9d-4c2e-b8a5-1c4e7b5a6f9d
    to: 5a3b7e9c-2f4d-4a6e-b8c1-3e7a5b9c2f4d
    fromPort: intersectionInterior
    toPort: default
  - id: 9b4c8e2a-6f7d-4b9c-e1a4-2e8b4c9a6f7d
    from: 5a3b7e9c-2f4d-4a6e-b8c1-3e7a5b9c2f4d
    to: 3c6f9a1e-8d4b-4f3c-a7e2-6f3c9a1e8d4b
    fromPort: default
    toPort: default
  - id: 1c7d4a2e-9f5b-4c1c-d8e3-7d1c4a2e9f5b
    from: 6f3b1a8e-9c4d-4a7f-e2c9-3b6f1a8e4c7d
    to: 6b5d8a3f-1c4e-4b7d-a9c2-5d6b8a3f1c4e
    fromPort: default
    toPort: default
  - id: 3e6a9c2f-8d1b-4e3e-a7c4-6a3e9c2f8d1b
    from: 6b5d8a3f-1c4e-4b7d-a9c2-5d6b8a3f1c4e
    to: 8f2a5c7d-3e6b-4a9f-c1d4-2a8f5c7d3e6b
    fromPort: default
    toPort: requestor
  - id: 5b4f7c1a-2e9d-4b5b-c6a9-4f5b7c1a2e9d
    from: 4a6c9f2d-7e3b-4d8a-c5f2-1a4c7e9f2d5b
    to: 8f2a5c7d-3e6b-4a9f-c1d4-2a8f5c7d3e6b
    fromPort: default
    toPort: supplier
  - id: 7d9c2a5f-6e8b-4d7d-c1f6-9c7d2a5f6e8b
    from: 8f2a5c7d-3e6b-4a9f-c1d4-2a8f5c7d3e6b
    to: 1a4d7c2f-9e5b-4d8a-f6c3-4d1a7c2f9e5b
    fromPort: merged
    toPort: default
  - id: 9f2e5c8a-1d4b-4f9f-e4c7-2e9f5c8a1d4b
    from: 1a4d7c2f-9e5b-4d8a-f6c3-4d1a7c2f9e5b
    to: 4b8e2a7d-3f6c-4a1e-b9d5-7a4b8e2d3f6c
    fromPort: incorrectInterior
    toPort: default
  - id: 7c3f1a6e-9d2b-4c8f-a5e1-3f7c1a6e9d2b
    from: 4b8e2a7d-3f6c-4a1e-b9d5-7a4b8e2d3f6c
    to: 3c6f9a1e-8d4b-4f3c-a7e2-6f3c9a1e8d4b
    fromPort: default
    toPort: default
  - id: 2a5c8f1d-7e4b-4f2a-c9e6-5c2a8f1d7e4b
    from: 4f8b3e6a-7d1c-4e5a-c2f9-3a6f9b4e7c1d
    to: 3c6f9a1e-8d4b-4f3c-a7e2-6f3c9a1e8d4b
    fromPort: failed
    toPort: default
- id: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
  name: buildingPartValidation
  nodes:
  - id: c223c809-eba3-4d73-8f1b-34d27515bb17
    name: InputRouter
    type: action
    action: InputRouter
    with:
      routingPort: default
  - id: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    name: PLATEAU3.LodSplitterWithDM
    type: subGraph
    subGraphId: 7e98d856-1438-4148-bdcb-91747ef2e405
  - id: 7b9c8d4e-6f5a-4c8b-9d3e-2a5f7b8c9d4e
    name: AttributeMapperBuildingPartLod0Or1
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: Index
        expr: env.get("__value").fileIndex
      - attribute: Filename
        expr: env.get("__value").gmlFilename
      - attribute: Building.gml_id
        expr: env.get("__value").gmlId
      - attribute: BuildingPart.gml_id
        expr: env.get("__value").featureId
      - attribute: lod
        expr: env.get("__value").lod
  - id: 9e8f7a6b-5c4d-3e2f-1a0b-9c8d7e6f5a4b
    name: CsvWriterBuildingPartLod0Or1
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_LOD0-1のBuildingPart.csv")
  - id: 77c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
    name: Lod0Or1BuildingPartCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_lod0_1_buildingpart
        expr: '1'
  - id: 88d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
    name: ErrorCount-Lod0Or1BuildingPart
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod01BuildingPart
  - id: d3c4e5f6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    name: PLATEAU4.BuildingPartConnectivityChecker
    type: action
    action: PLATEAU4.BuildingPartConnectivityChecker
    with:
      buildingIdAttribute: gmlId
      partIdAttribute: featureId
      lodAttribute: lod
      fileIndexAttribute: fileIndex
  - id: f5e6a7b8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
    name: FilterNonFullStatus
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("__value")._status != "full"
        outputPort: filtered
  - id: a6f7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    name: DeduplicateBuildingIds
    type: action
    action: FeatureDuplicateFilter
  - id: b7a8c9d0-1e2f-3a4b-5c6d-7e8f9a0b1c2d
    name: CountLbldg02Errors
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_lbldg02_error
        expr: '1'
  - id: c8b9d0e1-2f3a-4b5c-6d7e-8f9a0b1c2d3e
    name: AttributeMapperLbldg02Output
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: Index
        expr: env.get("__value").fileIndex
      - attribute: Filename
        expr: env.get("__value").gmlFilename
      - attribute: Building.gml_id
        expr: env.get("__value").gmlId
      - attribute: BuildingPart.gml_id
        expr: env.get("__value").featureId
      - attribute: lod
        expr: env.get("__value").lod
      - attribute: status
        expr: env.get("__value")._status
      - attribute: connected_id
        expr: env.get("__value")._connected_id
      - attribute: connected_parts
        expr: env.get("__value")._connected_parts
  - id: d9c0e1f2-3a4b-5c6d-7e8f-9a0b1c2d3e4f
    name: CsvWriterLbldg02Errors
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_L-bldg-02エラー.csv")
  - id: e2f3a4b5-6c7d-8e9f-0a1b-2c3d4e5f6a7b
    name: ErrorCount-Lbldg02
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLbldg02
  - id: 3f4e5d6c-7b8a-9c0d-1e2f-3a4b5c6d7e8f
    name: OutputRouter
    type: action
    action: OutputRouter
    with:
      routingPort: fileOutput
  edges:
  - id: ed4f5a6b-7c8d-4e9f-8a1b-2c3d4e5f6a7b
    from: c223c809-eba3-4d73-8f1b-34d27515bb17
    to: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    fromPort: default
    toPort: default
  - id: f8a9b0c1-2d3e-4f5a-9b6c-7d8e9f0a1b2c
    from: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    to: 77c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
    fromPort: lod0
    toPort: default
  - id: a1b2c3d4-5e6f-4a7b-8c9d-0e1f2a3b4c5d
    from: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    to: 77c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
    fromPort: lod1
    toPort: default
  - id: 66c6d7e8-9f0a-1b2c-3d4e-5f6a7b8c9d0e
    from: 77c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
    to: 7b9c8d4e-6f5a-4c8b-9d3e-2a5f7b8c9d4e
    fromPort: complete
    toPort: default
  - id: 5c6d7e8f-9a0b-1c2d-3e4f-5a6b7c8d9e0f
    from: 7b9c8d4e-6f5a-4c8b-9d3e-2a5f7b8c9d4e
    to: 9e8f7a6b-5c4d-3e2f-1a0b-9c8d7e6f5a4b
    fromPort: default
    toPort: default
  - id: 77d7e8f9-0a1b-2c3d-4e5f-6a7b8c9d0e1f
    from: 77c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
    to: 88d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
    fromPort: default
    toPort: default
  - id: 7e8f9a0b-1c2d-3e4f-5a6b-7c8d9e0f1a2b
    from: 9e8f7a6b-5c4d-3e2f-1a0b-9c8d7e6f5a4b
    to: 3f4e5d6c-7b8a-9c0d-1e2f-3a4b5c6d7e8f
    fromPort: default
    toPort: default
  - id: d6e7f8a9-0b1c-2d3e-4f5a-6b7c8d9e0f1a
    from: d3c4e5f6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    to: f5e6a7b8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
    fromPort: default
    toPort: default
  - id: f8a9b0c1-2d3e-4f5a-6b7c-8d9e0f1a2b3c
    from: f5e6a7b8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
    to: a6f7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    fromPort: filtered
    toPort: default
  - id: a9b0c1d2-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    from: a6f7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    to: b7a8c9d0-1e2f-3a4b-5c6d-7e8f9a0b1c2d
    fromPort: default
    toPort: default
  - id: b0c1d2e3-4f5a-6b7c-8d9e-0f1a2b3c4d5e
    from: a6f7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    to: c8b9d0e1-2f3a-4b5c-6d7e-8f9a0b1c2d3e
    fromPort: default
    toPort: default
  - id: f3a4b5c6-7d8e-9f0a-1b2c-3d4e5f6a7b8c
    from: b7a8c9d0-1e2f-3a4b-5c6d-7e8f9a0b1c2d
    to: e2f3a4b5-6c7d-8e9f-0a1b-2c3d4e5f6a7b
    fromPort: default
    toPort: default
  - id: c1d2e3f4-5a6b-7c8d-9e0f-1a2b3c4d5e6f
    from: c8b9d0e1-2f3a-4b5c-6d7e-8f9a0b1c2d3e
    to: d9c0e1f2-3a4b-5c6d-7e8f-9a0b1c2d3e4f
    fromPort: default
    toPort: default
  - id: d2e3f4a5-6b7c-8d9e-0f1a-2b3c4d5e6f7a
    from: d9c0e1f2-3a4b-5c6d-7e8f-9a0b1c2d3e4f
    to: 3f4e5d6c-7b8a-9c0d-1e2f-3a4b5c6d7e8f
    fromPort: default
    toPort: default
  - id: e1f2a3b4-5c6d-7e8f-9a0b-1c2d3e4f5a6b
    from: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    to: d3c4e5f6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    fromPort: lod2
    toPort: default
  - id: f2a3b4c5-6d7e-8f9a-0b1c-2d3e4f5a6b7c
    from: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    to: d3c4e5f6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    fromPort: lod3
    toPort: default
  - id: a3b4c5d6-7e8f-9a0b-1c2d-3e4f5a6b7c8d
    from: a5aefda5-b66f-4d20-b8b8-5b1aa322ec8e
    to: d3c4e5f6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    fromPort: lod4
    toPort: default
  ports:
    outputs:
    - id: errorCountLbldg02
      nodeId: e2f3a4b5-6c7d-8e9f-0a1b-2c3d4e5f6a7b
      port: default
    - id: errorCountLod01BuildingPart
      nodeId: 88d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
      port: default
    - id: fileOutput
      nodeId: 3f4e5d6c-7b8a-9c0d-1e2f-3a4b5c6d7e8f
      port: default
- id: 36d6a846-80a8-48e9-9c34-d7c0b8af2d6d
  name: FormatChecker
  nodes:
  - id: cbe26f1a-d39d-48e1-9d42-a9e0b61962ba
    name: InputRouter
    type: action
    action: InputRouter
    with:
      routingPort: default
  - id: 793ebebf-6903-4691-bed5-5913d3062a39
    name: SurfaceValidationC02
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: Building
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:Building" {
            1
          } else {
            0
          }
      - newAttribute: BuildingPart
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:BuildingPart" {
            1
          } else {
            0
          }
      - newAttribute: RoofSurface
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:RoofSurface" {
            1
          } else {
            0
          }
      - newAttribute: GroundSurface
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:GroundSurface" {
            1
          } else {
            0
          }
      - newAttribute: WallSurface
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:WallSurface" {
            1
          } else {
            0
          }
      - newAttribute: ClosureSurface
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:ClosureSurface" {
            1
          } else {
            0
          }
      - newAttribute: OuterCeilingSurface
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:OuterCeilingSurface" {
            1
          } else {
            0
          }
      - newAttribute: OuterFloorSurface
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:OuterFloorSurface" {
            1
          } else {
            0
          }
      - newAttribute: BuildingInstallation
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:BuildingInstallation" {
            1
          } else {
            0
          }
      - newAttribute: Door
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:Door" {
            1
          } else {
            0
          }
      - newAttribute: Window
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:Window" {
            1
          } else {
            0
          }
      - newAttribute: Room
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:Room" {
            1
          } else {
            0
          }
      - newAttribute: InteriorWallSurface
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:InteriorWallSurface" {
            1
          } else {
            0
          }
      - newAttribute: CeilingSurface
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:CeilingSurface" {
            1
          } else {
            0
          }
      - newAttribute: FloorSurface
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:FloorSurface" {
            1
          } else {
            0
          }
      - newAttribute: IntBuildingInstallation
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:IntBuildingInstallation" {
            1
          } else {
            0
          }
      - newAttribute: BuildingFurniture
        expr: |
          let feature_type = env.get("__value").featureType ?? "";
          if feature_type == "bldg:BuildingFurniture" {
            1
          } else {
            0
          }
  - id: 88e7f8a9-0b1c-2d3e-4f5a-6b7c8d9e0f1a
    name: AttributeManagerC02
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: remove
  - id: 7debf320-37c4-414e-acab-9f2fb41e2848
    name: FileTSVWriterC02
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_地物インスタンス数.csv")
  - id: 80b7d9fd-6514-49d0-88e6-a87c3c1d36c9
    name: FeatureFilterBuildingAndBuildingPart
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("__value")["gmlName"] == "bldg:Building" || env.get("__value")["gmlName"] == "bldg:BuildingPart"
        outputPort: default
  - id: b942f28a-3783-4672-8196-f124e8cc5f51
    name: BuildingUsageAttributeValidator
    type: action
    action: PLATEAU4.BuildingUsageAttributeValidator
  - id: 8f2a1b3c-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    name: AttributeManager-l-bldg-04-05-transform
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: rename
        value: Filename
      - attribute: fileIndex
        method: rename
        value: Index
      - attribute: gmlId
        method: rename
        value: gml_id
      - attribute: errors
        method: rename
        value: Building Usage Attribute Error
      - attribute: featureType
        method: rename
        value: Feature Type
      - attribute: admin
        method: remove
      - attribute: maxLod
        method: remove
      - attribute: package
        method: remove
      - attribute: gmlRootId
        method: remove
      - attribute: gmlName
        method: remove
      - attribute: extension
        method: remove
      - attribute: area
        method: remove
      - attribute: root
        method: remove
      - attribute: dirSchemas
        method: remove
      - attribute: dirRoot
        method: remove
      - attribute: cityCodeError
        method: remove
      - attribute: featureIndex
        method: remove
      - attribute: gmlPath
        method: remove
      - attribute: dirCodelists
        method: remove
      - attribute: udxDirs
        method: remove
      - attribute: cityGmlAttributes
        method: remove
  - id: 72b70428-0bb9-401b-a295-881556adc526
    name: FileTSVWriterLBDLG04-05
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_L-bldg-04,05エラー.csv")
  - id: 5d8e7f4a-3b2c-4f1e-9a8d-6c5b4e3f2a1b
    name: AttributeManager-city-code-error-transform
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: rename
        value: Filename
      - attribute: fileIndex
        method: rename
        value: Index
      - attribute: gmlId
        method: rename
        value: gml_id
      - attribute: cityCodeError
        method: rename
        value: City Code Error
      - attribute: featureType
        method: rename
        value: Feature Type
      - attribute: package
        method: remove
      - attribute: dirRoot
        method: remove
      - attribute: maxLod
        method: remove
      - attribute: udxDirs
        method: remove
      - attribute: dirSchemas
        method: remove
      - attribute: root
        method: remove
      - attribute: area
        method: remove
      - attribute: gmlPath
        method: remove
      - attribute: gmlName
        method: remove
      - attribute: gmlRootId
        method: remove
      - attribute: admin
        method: remove
      - attribute: cityGmlAttributes
        method: remove
      - attribute: featureIndex
        method: remove
      - attribute: dirCodelists
        method: remove
      - attribute: extension
        method: remove
  - id: ab3505ad-4e89-4442-ab36-c52ac29c332e
    name: FileTSVWriterCityCodeError
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_市区町村コードエラー.csv")
  - id: 33c1a2b3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    name: CityCodeErrorCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_incorrect_city_code
        expr: '1'
  - id: 44d2b3c4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    name: ErrorCount-CityCode
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountCityCode
  - id: 55e3c4d5-6f7a-8b9c-0d1e-2f3a4b5c6d7e
    name: L0405BldgErrorCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_incorrect_usage_attribute
        expr: '1'
  - id: 66f4d5e6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    name: ErrorCount-L0405Bldg
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountL0405Bldg
  - id: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    name: FeatureFilterValidBuildingIds
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          let attributes = env.get("__value").cityGmlAttributes ?? #{};
          let building_id_attribute = attributes["uro:BuildingIDAttribute"] ?? #{};
          let building_id = building_id_attribute["uro:buildingID"] ?? "";
          let branch_id = building_id_attribute["uro:branchID"]  ?? "";
          let part_id = building_id_attribute["uro:partID"] ?? "";
          let gml_name = env.get("__value").gmlName ?? "";

          // Condition 1: buildingID matches regex ^\d{5}-bldg-\d+$
          let building_id_valid = str::matches(building_id, `^\d{5}-bldg-\d+$`);

          // Condition 2: branchID is missing or integer type
          let branch_id_valid = branch_id == "" || type_of(branch_id) == "i64";

          // Condition 3: Building with missing partID, or BuildingPart with integer partID
          let part_id_valid = false;
          if gml_name == "bldg:Building" {
              part_id_valid = part_id == "";
          } else if gml_name == "bldg:BuildingPart" {
              part_id_valid = type_of(part_id) == "i64";
          }

          building_id_valid && branch_id_valid && part_id_valid
        outputPort: goodUroFormatting
  - id: 3b4c5d6e-7f8a-9b0c-1d2e-3f4a5b6c7d8e
    name: AttributeMapper-invalid-building-id-format
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: Index
        expr: |
          env.get("__value").fileIndex
      - attribute: Filename
        expr: |
          env.get("__value").gmlFilename
      - attribute: FeatureType
        expr: |
          env.get("__value").gmlName
      - attribute: uro:buildingID
        expr: |
          let attributes = env.get("__value").cityGmlAttributes ?? #{};
          let building_id_attribute = attributes["uro:BuildingIDAttribute"] ?? #{};
          building_id_attribute["uro:buildingID"] ?? ""
      - attribute: uro:branchID
        expr: |
          let attributes = env.get("__value").cityGmlAttributes ?? #{};
          let building_id_attribute = attributes["uro:BuildingIDAttribute"] ?? #{};
          building_id_attribute["uro:branchID"] ?? "（なし）"
      - attribute: uro:partID
        expr: |
          let attributes = env.get("__value").cityGmlAttributes ?? #{};
          let building_id_attribute = attributes["uro:BuildingIDAttribute"] ?? #{};
          building_id_attribute["uro:partID"] ?? "（なし）"
  - id: 4c5d6e7f-8a9b-0c1d-2e3f-4a5b6c7d8e9f
    name: FileWriter-invalid-building-id-format
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_建物ID書式不正.csv")
  - id: 0b291ad6-cdfa-4371-bcbb-3422b2cd53cf
    name: AttributeAggregator-c-bldg-01
    type: action
    action: AttributeAggregator
    with:
      aggregateAttributes:
      - newAttribute: uroBuildingId
        attributeValue: |
          let attributes = env.get("__value").cityGmlAttributes ?? #{};
          let building_id_attribute = attributes["uro:BuildingIDAttribute"] ?? [];
          building_id_attribute["uro:buildingID"] ?? ""
      - newAttribute: uroBranchId
        attributeValue: |
          let attributes = env.get("__value").cityGmlAttributes ?? #{};
          let building_id_attribute = attributes["uro:BuildingIDAttribute"] ?? [];
          building_id_attribute["uro:branchID"] ?? ""
      - newAttribute: uroPartId
        attributeValue: |
          let attributes = env.get("__value").cityGmlAttributes ?? #{};
          let building_id_attribute = attributes["uro:BuildingIDAttribute"] ?? [];
          building_id_attribute["uro:partID"] ?? ""
      calculation: |
        1
      calculationAttribute: |
        uroBuildingIdCount
      method: count
  - id: 9feabfe5-44eb-43c9-a892-ca439a0c0562
    name: FeatureMerger-c-bldg-01
    type: action
    action: FeatureMerger
    with:
      requestorAttributeValue: |
        let attributes = env.get("__value").cityGmlAttributes ?? #{};
        let building_id_attribute = attributes["uro:BuildingIDAttribute"] ?? [];
        (building_id_attribute["uro:buildingID"] ?? "") + "-" + (building_id_attribute["uro:branchID"] ?? "") + "-" + (building_id_attribute["uro:partID"] ?? "")
      supplierAttributeValue: |
        (env.get("__value").uroBuildingId ?? "") + "-" + (env.get("__value").uroBranchId ?? "") + "-" + (env.get("__value").uroPartId ?? "")
  - id: f003fa53-d8da-488b-9be2-9f871a7394b5
    name: FeatureFilterByMultipleBuildingId-c-bldg-01
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("__value").uroBuildingIdCount > 1
        outputPort: multipleBuildingId
  - id: b6238f2d-e1d3-497b-a632-93d9d489ccfc
    name: AttributeMapper-c-bldg-01
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: Index
        expr: |
          env.get("__value").fileIndex
      - attribute: Filename
        expr: |
          env.get("__value").gmlFilename
      - attribute: GmlId
        expr: |
          env.get("__value").gmlId
      - attribute: UroBuildingId
        expr: |
          let city_gml_attrs = env.get("__value").cityGmlAttributes ?? #{};
          let bldg_id_attr = city_gml_attrs["uro:BuildingIDAttribute"];
          bldg_id_attr["uro:buildingID"] ?? ""
      - attribute: UroBranchId
        expr: |
          let city_gml_attrs = env.get("__value").cityGmlAttributes ?? #{};
          let bldg_id_attr = city_gml_attrs["uro:BuildingIDAttribute"];
          let branch_id = bldg_id_attr["uro:branchID"] ?? "";
          if (branch_id == "") {
            "（なし）"
          } else {
            branch_id
          }
      - attribute: UroPartId
        expr: |
          let city_gml_attrs = env.get("__value").cityGmlAttributes ?? #{};
          let bldg_id_attr = city_gml_attrs["uro:BuildingIDAttribute"] ?? #{};
          let part_id = bldg_id_attr["uro:partID"] ?? "";
          if (part_id == "") {
            "（なし）"
          } else {
            part_id
          }
  - id: bba483d0-9813-499e-a0f6-22874646450d
    name: FileWriterTsv-c-bldg-01
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_C-bldg-01エラー.csv")
  - id: 124b1896-04c2-41d9-9e76-0ce32b04089f
    name: C-BLDG-01ErrorCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_duplicate_building_id
        expr: '1'
  - id: aa7d7462-2b7f-472f-a381-90bc3cdba432
    name: ErrorCount-C-BLDG-01
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountCBldg01
  - id: 77a5e6f7-8b9c-0d1e-2f3a-4b5c6d7e8f9a
    name: MissingBuildingIdErrorCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_missing_building_id
        expr: '1'
  - id: 88b6f7a8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
    name: ErrorCount-MissingBuildingId
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountMissingBuildingId
  - id: 99c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
    name: FeatureInstanceCount-C02
    type: action
    action: OutputRouter
    with:
      routingPort: featureInstanceCountC02
  - id: 9a0b1c2d-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    name: FileOutputRouter
    type: action
    action: OutputRouter
    with:
      routingPort: fileOutput
  edges:
  - id: 63110e28-8d45-46a7-afa8-8a1877d1739a
    from: cbe26f1a-d39d-48e1-9d42-a9e0b61962ba
    fromPort: default
    to: 793ebebf-6903-4691-bed5-5913d3062a39
    toPort: default
  - id: 1ba43f25-e4b1-42a5-ab0d-732380a7124c
    from: 793ebebf-6903-4691-bed5-5913d3062a39
    fromPort: default
    to: 88e7f8a9-0b1c-2d3e-4f5a-6b7c8d9e0f1a
    toPort: default
  - id: 77b6c7d8-9e0f-1a2b-3c4d-5e6f7a8b9c0d
    from: 88e7f8a9-0b1c-2d3e-4f5a-6b7c8d9e0f1a
    fromPort: default
    to: 7debf320-37c4-414e-acab-9f2fb41e2848
    toPort: default
  - id: 88d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
    from: 793ebebf-6903-4691-bed5-5913d3062a39
    fromPort: default
    to: 99c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
    toPort: default
  - id: 6546098c-dca0-4a81-8342-c993c28d36f6
    from: cbe26f1a-d39d-48e1-9d42-a9e0b61962ba
    fromPort: default
    to: 80b7d9fd-6514-49d0-88e6-a87c3c1d36c9
    toPort: default
  - id: 8ac73cfb-7496-462b-a9fb-e42f81dbb198
    from: 80b7d9fd-6514-49d0-88e6-a87c3c1d36c9
    fromPort: default
    to: b942f28a-3783-4672-8196-f124e8cc5f51
    toPort: default
  - id: 452c80b4-97e5-48f3-a6fc-80630b9a7f17
    from: b942f28a-3783-4672-8196-f124e8cc5f51
    fromPort: l0405BldgError
    to: 8f2a1b3c-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    toPort: default
  - id: 9e8d7c6b-5a4f-3e2d-1c0b-9a8e7f6d5c4b
    from: 8f2a1b3c-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    fromPort: default
    to: 72b70428-0bb9-401b-a295-881556adc526
    toPort: default
  - id: 9b8fd1b8-4f51-48f7-b727-933626555fd7
    from: b942f28a-3783-4672-8196-f124e8cc5f51
    fromPort: cityCodeError
    to: 5d8e7f4a-3b2c-4f1e-9a8d-6c5b4e3f2a1b
    toPort: default
  - id: 2c4e5f1a-8b9d-4a7e-9c2f-5e8d6a4b1c3f
    from: 5d8e7f4a-3b2c-4f1e-9a8d-6c5b4e3f2a1b
    fromPort: default
    to: ab3505ad-4e89-4442-ab36-c52ac29c332e
    toPort: default
  - id: 11a1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    from: b942f28a-3783-4672-8196-f124e8cc5f51
    fromPort: cityCodeError
    to: 33c1a2b3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    toPort: default
  - id: 22b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    from: 33c1a2b3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    fromPort: default
    to: 44d2b3c4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    toPort: default
  - id: 33c3d4e5-6f7a-8b9c-0d1e-2f3a4b5c6d7e
    from: b942f28a-3783-4672-8196-f124e8cc5f51
    fromPort: l0405BldgError
    to: 55e3c4d5-6f7a-8b9c-0d1e-2f3a4b5c6d7e
    toPort: default
  - id: 44d4e5f6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    from: 55e3c4d5-6f7a-8b9c-0d1e-2f3a4b5c6d7e
    fromPort: default
    to: 66f4d5e6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    toPort: default
  - id: 5a6a854c-8778-4c58-aa9c-f3f87635a569
    from: 80b7d9fd-6514-49d0-88e6-a87c3c1d36c9
    fromPort: default
    to: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    toPort: default
  - id: 2f3a4b5c-6d7e-8f9a-0b1c-2d3e4f5a6b7c
    from: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    fromPort: goodUroFormatting
    to: 0b291ad6-cdfa-4371-bcbb-3422b2cd53cf
    toPort: default
  - id: 5e6f7a8b-9c0d-1e2f-3a4b-5c6d7e8f9a0b
    from: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    fromPort: unfiltered
    to: 3b4c5d6e-7f8a-9b0c-1d2e-3f4a5b6c7d8e
    toPort: default
  - id: 6f7a8b9c-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    from: 3b4c5d6e-7f8a-9b0c-1d2e-3f4a5b6c7d8e
    fromPort: default
    to: 4c5d6e7f-8a9b-0c1d-2e3f-4a5b6c7d8e9f
    toPort: default
  - id: 62d508e6-0c0d-45c5-8322-5369e50b693c
    from: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    fromPort: goodUroFormatting
    to: 9feabfe5-44eb-43c9-a892-ca439a0c0562
    toPort: requestor
  - id: e4dff82e-7c9f-469d-b60f-eee0afa28405
    from: 0b291ad6-cdfa-4371-bcbb-3422b2cd53cf
    fromPort: default
    to: 9feabfe5-44eb-43c9-a892-ca439a0c0562
    toPort: supplier
  - id: 0a83d16c-30e0-4ea3-86fa-c7794641a0d6
    from: 9feabfe5-44eb-43c9-a892-ca439a0c0562
    fromPort: merged
    to: f003fa53-d8da-488b-9be2-9f871a7394b5
    toPort: default
  - id: cfd17a81-3251-43d3-b161-8499ec64eadf
    from: f003fa53-d8da-488b-9be2-9f871a7394b5
    fromPort: multipleBuildingId
    to: b6238f2d-e1d3-497b-a632-93d9d489ccfc
    toPort: default
  - id: d0341071-8164-480f-bad5-73caeec1dc22
    from: b6238f2d-e1d3-497b-a632-93d9d489ccfc
    fromPort: default
    to: bba483d0-9813-499e-a0f6-22874646450d
    toPort: default
  - id: 174aea4f-a7a9-4dee-8b6d-b7eb2234a4ce
    from: f003fa53-d8da-488b-9be2-9f871a7394b5
    fromPort: multipleBuildingId
    to: 124b1896-04c2-41d9-9e76-0ce32b04089f
    toPort: default
  - id: ccc937ca-4311-4c80-a30b-e8939d70c23c
    from: 124b1896-04c2-41d9-9e76-0ce32b04089f
    fromPort: default
    to: aa7d7462-2b7f-472f-a381-90bc3cdba432
    toPort: default
  - id: 55e5f6a7-8b9c-0d1e-2f3a-4b5c6d7e8f9a
    from: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    fromPort: unfiltered
    to: 77a5e6f7-8b9c-0d1e-2f3a-4b5c6d7e8f9a
    toPort: default
  - id: 66f6a7b8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
    from: 77a5e6f7-8b9c-0d1e-2f3a-4b5c6d7e8f9a
    fromPort: default
    to: 88b6f7a8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
    toPort: default
  - id: 0a1b2c3d-4e5f-6a7b-8c9d-0e1f2a3b4c5d
    from: 7debf320-37c4-414e-acab-9f2fb41e2848
    fromPort: default
    to: 9a0b1c2d-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    toPort: default
  - id: 1b2c3d4e-5f6a-7b8c-9d0e-1f2a3b4c5d6e
    from: 72b70428-0bb9-401b-a295-881556adc526
    fromPort: default
    to: 9a0b1c2d-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    toPort: default
  - id: 2c3d4e5f-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    from: ab3505ad-4e89-4442-ab36-c52ac29c332e
    fromPort: default
    to: 9a0b1c2d-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    toPort: default
  - id: 3d4e5f6a-7b8c-9d0e-1f2a-3b4c5d6e7f8a
    from: 4c5d6e7f-8a9b-0c1d-2e3f-4a5b6c7d8e9f
    fromPort: default
    to: 9a0b1c2d-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    toPort: default
  - id: 4e5f6a7b-8c9d-0e1f-2a3b-4c5d6e7f8a9b
    from: bba483d0-9813-499e-a0f6-22874646450d
    fromPort: default
    to: 9a0b1c2d-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    toPort: default
  ports:
    outputs:
    - id: featureInstanceCountC02
      nodeId: 99c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
      port: default
    - id: errorCountCityCode
      nodeId: 44d2b3c4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
      port: default
    - id: errorCountL0405Bldg
      nodeId: 66f4d5e6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
      port: default
    - id: errorCountCBldg01
      nodeId: aa7d7462-2b7f-472f-a381-90bc3cdba432
      port: default
    - id: errorCountMissingBuildingId
      nodeId: 88b6f7a8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
      port: default
    - id: fileOutput
      nodeId: 9a0b1c2d-3e4f-5a6b-7c8d-9e0f1a2b3c4d
      port: default
- id: 34e55bec-9185-4a66-9c41-3dbddc1e64fa
  name: ReferenceAndTypeChecker
  nodes:
  - id: ab309f69-4758-491b-831c-75ea5c0f05fe
    name: InputRouter
    type: action
    action: InputRouter
    with:
      routingPort: default
  - id: 911ebdb1-a05e-48f4-a208-c0653f1f1731
    name: UnmatchedXlinkDetector
    type: action
    action: PLATEAU4.UnmatchedXlinkDetector
    with:
      attribute: gmlPath
  - id: 691a328a-f39b-403e-b62f-7525771b6f14
    name: L-bldg-Summary
    type: action
    action: NoopSink
  - id: 88c90fea-04d6-4e54-8ab1-4dc6386f6699
    name: AttributeManagerFrom
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: Attribute
        method: create
        value: |
          "参照元 xlink:href"
      - attribute: unmatchedXlinkFromTag
        method: rename
        value: unmatchedXlinkTag
      - attribute: unmatchedXlinkFromId
        method: rename
        value: unmatchedXlinkId
  - id: 2d024ca7-cb00-47bb-aa50-12a395a6c8b8
    name: AttributeManagerTo
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: Attribute
        method: create
        value: |
          "参照先 gml:id"
      - attribute: unmatchedXlinkToTag
        method: rename
        value: unmatchedXlinkTag
      - attribute: unmatchedXlinkToId
        method: rename
        value: unmatchedXlinkId
  - id: 7c7dd820-2c7e-4e79-ab3f-1566fc4bd2ca
    name: AttributeMapperL-bldg-06
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: Index
        expr: |
          env.get("__value").fileIndex
      - attribute: Filename
        expr: |
          file::extract_filename(env.get("__value").gmlPath)
      - attribute: gmlFilename
        expr: |
          file::extract_filename(env.get("__value").gmlPath)
      - attribute: Building gml:id
        expr: |
          env.get("__value").gmlId
      - attribute: Unmatched Xlink Tag
        expr: |
          collection::join_array((env.get("__value").unmatchedXlinkTag ?? []), ",")
      - attribute: Attribute
        expr: |
          env.get("__value").Attribute
      - attribute: Unmatched Xlink ID
        expr: |
          collection::join_array((env.get("__value").unmatchedXlinkId ?? []), ",")
  - id: 99d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
    name: AttributeManagerLbldg06
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: remove
  - id: adba8857-9de2-43bd-8cde-b83bc08a58f6
    name: FileWriterTsvL-bldg-06
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_L-bldg-06エラー.csv")
  - id: 77a1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    name: Lbldg06ErrorCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_lbldg06_error
        expr: '1'
  - id: 88b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    name: ErrorCount-Lbldg06
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLbldg06
  - id: 1c480edd-fa61-4b43-b851-8cfc560f5859
    name: BuildingInstallationGeometryTypeChecker
    type: action
    action: PLATEAU4.BuildingInstallationGeometryTypeChecker
  - id: 690f9475-1821-4f50-8315-f00f53251a00
    name: FeatureFilterByBuildingInstallationGeometryType
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          !(env.get("__value").geomTag in ["gml:MultiSurface", "gml:Solid"])
        outputPort: default
  - id: 38b305d1-d716-48da-b578-419e15f66b4b
    name: AttributeMapperT-bldg-02
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: Index
        expr: |
          env.get("__value").fileIndex
      - attribute: Filename
        expr: |
          file::extract_filename(env.get("__value").gmlPath)
      - attribute: Building gml:id
        expr: |
          env.get("__value").bldgGmlId
      - attribute: BuildingInstallation gml:id
        expr: |
          env.get("__value").instGmlId
      - attribute: GeometryType
        expr: |
          env.get("__value").geomTag
  - id: 2bae2659-e981-4eb1-8cbe-ce0352584a10
    name: FileWriterTsvT-bldg-02
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_T-bldg-02エラー.csv")
  - id: 35e0e6d2-44f4-4e75-abce-5280c2b80a5d
    name: StatisticsCalculatorT-bldg-02
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: cityGmlPath
      aggregateAttribute: cityGmlPath
      calculations:
      - newAttribute: instGmlIdTotalCount
        expr: |
          let gml_id = env.get("__value").instGmlId ?? "";
          if gml_id != "" {
            1
          } else {
            0
          }
  - id: 630081e4-0ea1-4fd3-ba31-8154b2980258
    name: NoopT-bldg-02
    type: action
    action: NoopSink
  - id: 99a1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    name: InvalidBldgInstGeomTypeCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_invalid_bldginst_geom_type
        expr: '1'
  - id: 88d2c3e4-5f6a-7b8c-9d0e-1f2a3b4c5d6e
    name: ErrorCount-InvalidBldgInstGeomType
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountInvalidBldgInstGeomType
  - id: aab0c1d2-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    name: FileOutputRouter
    type: action
    action: OutputRouter
    with:
      routingPort: fileOutput
  edges:
  - id: 93431d4e-fcd2-4308-af3c-9da9441ac911
    from: ab309f69-4758-491b-831c-75ea5c0f05fe
    to: 911ebdb1-a05e-48f4-a208-c0653f1f1731
    fromPort: default
    toPort: default
  - id: 6941c617-dc23-4aa9-b794-b7d409212ccb
    from: 911ebdb1-a05e-48f4-a208-c0653f1f1731
    to: 691a328a-f39b-403e-b62f-7525771b6f14
    fromPort: summary
    toPort: default
  - id: abcb0569-faf7-4317-80d8-fb80a0e5b0d7
    from: 911ebdb1-a05e-48f4-a208-c0653f1f1731
    to: 88c90fea-04d6-4e54-8ab1-4dc6386f6699
    fromPort: unMatchedXlinkFrom
    toPort: default
  - id: 9830a9fb-73ed-42c2-b2eb-c2315560ae49
    from: 911ebdb1-a05e-48f4-a208-c0653f1f1731
    to: 2d024ca7-cb00-47bb-aa50-12a395a6c8b8
    fromPort: unMatchedXlinkTo
    toPort: default
  - id: 6e42817f-c316-40d0-b972-17ad2409a350
    from: 88c90fea-04d6-4e54-8ab1-4dc6386f6699
    to: 7c7dd820-2c7e-4e79-ab3f-1566fc4bd2ca
    fromPort: default
    toPort: default
  - id: 59fcfbd3-9e08-4117-bd5d-43854c6af81f
    from: 2d024ca7-cb00-47bb-aa50-12a395a6c8b8
    to: 7c7dd820-2c7e-4e79-ab3f-1566fc4bd2ca
    fromPort: default
    toPort: default
  - id: f398a1bc-8dc3-4b14-a971-3e765afea9ef
    from: 7c7dd820-2c7e-4e79-ab3f-1566fc4bd2ca
    to: 99d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
    fromPort: default
    toPort: default
  - id: 88e8f9a0-1b2c-3d4e-5f6a-7b8c9d0e1f2a
    from: 99d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
    to: adba8857-9de2-43bd-8cde-b83bc08a58f6
    fromPort: default
    toPort: default
  - id: 55a1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    from: 7c7dd820-2c7e-4e79-ab3f-1566fc4bd2ca
    to: 77a1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    fromPort: default
    toPort: default
  - id: 66b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    from: 77a1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    fromPort: default
    to: 88b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    toPort: default
  - id: 50c97ada-42ba-494e-a844-d3256f998a60
    from: ab309f69-4758-491b-831c-75ea5c0f05fe
    to: 1c480edd-fa61-4b43-b851-8cfc560f5859
    fromPort: default
    toPort: default
  - id: 9ac13613-ccca-42fd-afd1-77fa2635e288
    from: 1c480edd-fa61-4b43-b851-8cfc560f5859
    to: 690f9475-1821-4f50-8315-f00f53251a00
    fromPort: default
    toPort: default
  - id: c79def35-473d-406a-8478-0335aa9ae4c1
    from: 690f9475-1821-4f50-8315-f00f53251a00
    to: 38b305d1-d716-48da-b578-419e15f66b4b
    fromPort: default
    toPort: default
  - id: 4205ee4c-4a1b-4628-b602-6127b994a8a0
    from: 38b305d1-d716-48da-b578-419e15f66b4b
    to: 2bae2659-e981-4eb1-8cbe-ce0352584a10
    fromPort: default
    toPort: default
  - id: ddac9d6a-fe63-4bf2-a640-5e2a541176a2
    from: 690f9475-1821-4f50-8315-f00f53251a00
    to: 35e0e6d2-44f4-4e75-abce-5280c2b80a5d
    fromPort: default
    toPort: default
  - id: ad6ddebd-4302-46f1-8df7-1358be238470
    from: 35e0e6d2-44f4-4e75-abce-5280c2b80a5d
    to: 630081e4-0ea1-4fd3-ba31-8154b2980258
    fromPort: default
    toPort: default
  - id: 77a7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    from: 690f9475-1821-4f50-8315-f00f53251a00
    fromPort: unfiltered
    to: 99a1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    toPort: default
  - id: 66b6c7d8-9e0f-1a2b-3c4d-5e6f7a8b9c0d
    from: 99a1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    fromPort: default
    to: 88d2c3e4-5f6a-7b8c-9d0e-1f2a3b4c5d6e
    toPort: default
  - id: 0a1b2c3d-4e5f-6a7b-8c9d-0e1f2a3b4c5d
    from: adba8857-9de2-43bd-8cde-b83bc08a58f6
    fromPort: default
    to: aab0c1d2-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    toPort: default
  - id: 1b2c3d4e-5f6a-7b8c-9d0e-1f2a3b4c5d6e
    from: 2bae2659-e981-4eb1-8cbe-ce0352584a10
    fromPort: default
    to: aab0c1d2-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    toPort: default
  ports:
    outputs:
    - id: errorCountLbldg06
      nodeId: 88b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
      port: default
    - id: errorCountInvalidBldgInstGeomType
      nodeId: 88d2c3e4-5f6a-7b8c-9d0e-1f2a3b4c5d6e
      port: default
    - id: fileOutput
      nodeId: aab0c1d2-3e4f-5a6b-7c8d-9e0f1a2b3c4d
      port: default
- id: a9952b0d-e085-4a0b-bb76-fa36b969c96b
  name: SurfaceValidation01
  nodes:
  - id: 5d8f3c2e-9a4b-4e1c-8f7a-3c5d9e2b8a1f
    name: InputRouter
    type: action
    action: InputRouter
    with:
      routingPort: default
  - id: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    name: PLATEAU3.LodSplitterWithDM
    type: subGraph
    subGraphId: 7e98d856-1438-4148-bdcb-91747ef2e405
  - id: 3c8d9e7f-2a5b-4f1c-8e6a-9d3c5b8e1a4f
    name: PLATEAU3.SurfaceValidator2D
    type: subGraph
    subGraphId: 8a5b1c9d-2e4f-4a3b-9c5d-1e6f8a2b4c7d
  - id: b1f5a9c3-7e2d-4a8c-9f6b-2d8e5c3a7b9f
    name: AttributeManagerLod0InvalidSurface
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: rename
        value: filename
      - attribute: featureType
        method: rename
        value: feature_type
      - attribute: gmlId
        method: rename
        value: gml_id
      - attribute: issue
        method: create
        value: |
          let value = env.get("__value");
          if value.validationResult?.details != () {
            return value.validationResult.details[0][0];
          }
          if "issue" in value {
            return value.issue;
          }
          "UnknownError"
      - attribute: validationResult
        method: remove
      - attribute: surfaceId
        method: remove
      - attribute: dirCodelists
        method: remove
      - attribute: featureIndex
        method: remove
      - attribute: featureId
        method: remove
      - attribute: gmlPath
        method: remove
      - attribute: fileIndex
        method: remove
      - attribute: holeCount
        method: remove
      - attribute: maxLod
        method: remove
      - attribute: cityGmlAttributes
        method: remove
      - attribute: featureParentId
        method: remove
      - attribute: dumpGeometry
        method: remove
      - attribute: gmlName
        method: remove
      - attribute: geometryName
        method: remove
      - attribute: gmlRootId
        method: remove
      - attribute: baseCityCode
        method: remove
      - attribute: cityCode
        method: remove
      - attribute: extension
        method: remove
      - attribute: package
        method: remove
      - attribute: root
        method: remove
      - attribute: admin
        method: remove
      - attribute: area
        method: remove
      - attribute: dirRoot
        method: remove
      - attribute: udxDirs
        method: remove
      - attribute: codelists
        method: remove
      - attribute: dirSchemas
        method: remove
      - attribute: schemas
        method: remove
      - attribute: objectListPath
        method: remove
  - id: a7b3c9e5-4f8d-4c2e-9a1b-6e3f5d8c2a7b
    name: FeatureWriterLod0IncorrectOrientation
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_LOD0面の向きエラー.csv")
  - id: 11a1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    name: Lod0IncorrectOrientationCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_lod0_incorrect_orientation
        expr: '1'
  - id: 22b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    name: ErrorCount-Lod0IncorrectOrientation
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod0IncorrectOrientation
  - id: f8e2a4c6-5d9b-4f7e-8c3a-1e6d4b8f2c5a
    name: FeatureWriterLod0InvalidSurface
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_LOD0面のエラー.csv")
  - id: 33c3d4e5-6f7a-8b9c-0d1e-2f3a4b5c6d7e
    name: Lod0InvalidSurfaceCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_lod0_invalid_surface
        expr: '1'
  - id: 44d4e5f6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    name: ErrorCount-Lod0InvalidSurface
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod0InvalidSurface
  - id: 950407af-eec5-49ee-902c-2b41f31150d3
    name: PLATEAU3.SurfaceValidator3D_LOD1
    type: subGraph
    subGraphId: 8a5b1c9d-2e4f-4a3b-9c5d-1e6f8a2b4c7d
  - id: c2e8f4a6-9b3d-4e7c-8a5f-1d9b6e4c7f2a
    name: AttributeManagerLod1InvalidSurface
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: rename
        value: filename
      - attribute: featureType
        method: rename
        value: feature_type
      - attribute: gmlId
        method: rename
        value: gml_id
      - attribute: issue
        method: create
        value: |
          let value = env.get("__value");
          if value.validationResult?.details != () {
            return value.validationResult.details[0][0];
          }
          if "issue" in value {
            return value.issue;
          }
          "UnknownError"
      - attribute: validationResult
        method: remove
      - attribute: surfaceId
        method: remove
      - attribute: dirCodelists
        method: remove
      - attribute: featureIndex
        method: remove
      - attribute: featureId
        method: remove
      - attribute: gmlPath
        method: remove
      - attribute: fileIndex
        method: remove
      - attribute: holeCount
        method: remove
      - attribute: maxLod
        method: remove
      - attribute: cityGmlAttributes
        method: remove
      - attribute: featureParentId
        method: remove
      - attribute: dumpGeometry
        method: remove
      - attribute: gmlName
        method: remove
      - attribute: geometryName
        method: remove
      - attribute: gmlRootId
        method: remove
      - attribute: baseCityCode
        method: remove
      - attribute: cityCode
        method: remove
      - attribute: extension
        method: remove
      - attribute: package
        method: remove
      - attribute: root
        method: remove
      - attribute: admin
        method: remove
      - attribute: area
        method: remove
      - attribute: dirRoot
        method: remove
      - attribute: udxDirs
        method: remove
      - attribute: codelists
        method: remove
      - attribute: dirSchemas
        method: remove
      - attribute: schemas
        method: remove
      - attribute: objectListPath
        method: remove
  - id: d5a7b9f3-6e4c-4d8a-9f2b-3c7e8d5a6b9f
    name: FeatureWriterLod1InvalidSurface
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_LOD1境界面のエラー.csv")
  - id: 55e5f6a7-8b9c-0d1e-2f3a-4b5c6d7e8f9a
    name: Lod1InvalidSurfaceCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_lod1_invalid_surface
        expr: '1'
  - id: 66f6a7b8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
    name: ErrorCount-Lod1InvalidSurface
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod1InvalidSurface
  - id: 4f7a9b2e-5c8d-4e3a-9f6b-1d4c7e9a2b5f
    name: Dummy_GeometryFilter
    type: action
    action: NoopProcessor
  - id: 3b6e9c5d-8f2a-4d7b-9e3c-6a1f4b9e2c5d
    name: PLATEAU3.SurfaceValidator3D_LOD2-4
    type: subGraph
    subGraphId: 8a5b1c9d-2e4f-4a3b-9c5d-1e6f8a2b4c7d
  - id: 7f2a5c8d-4b9e-4c3a-9f6d-2e8b5c7a4f9d
    name: AttributeManagerLod2-4InvalidSurface
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: rename
        value: filename
      - attribute: featureType
        method: rename
        value: feature_type
      - attribute: gmlId
        method: rename
        value: gml_id
      - attribute: issue
        method: create
        value: |
          let value = env.get("__value");
          if value.validationResult?.details != () {
            return value.validationResult.details[0][0];
          }
          if "issue" in value {
            return value.issue;
          }
          "UnknownError"
      - attribute: validationResult
        method: remove
      - attribute: surfaceId
        method: remove
      - attribute: dirCodelists
        method: remove
      - attribute: featureIndex
        method: remove
      - attribute: featureId
        method: remove
      - attribute: gmlPath
        method: remove
      - attribute: fileIndex
        method: remove
      - attribute: holeCount
        method: remove
      - attribute: maxLod
        method: remove
      - attribute: cityGmlAttributes
        method: remove
      - attribute: featureParentId
        method: remove
      - attribute: dumpGeometry
        method: remove
      - attribute: gmlName
        method: remove
      - attribute: geometryName
        method: remove
      - attribute: gmlRootId
        method: remove
      - attribute: baseCityCode
        method: remove
      - attribute: cityCode
        method: remove
      - attribute: extension
        method: remove
      - attribute: package
        method: remove
      - attribute: root
        method: remove
      - attribute: admin
        method: remove
      - attribute: area
        method: remove
      - attribute: dirRoot
        method: remove
      - attribute: udxDirs
        method: remove
      - attribute: codelists
        method: remove
      - attribute: dirSchemas
        method: remove
      - attribute: schemas
        method: remove
      - attribute: objectListPath
        method: remove
  - id: 9e3c6b8f-5a2d-4f7e-8c1a-4d9b6e3c8f5a
    name: FeatureWriterLod2-4InvalidSurface
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_LOD2以上境界面のエラー.csv")
  - id: 77a7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    name: Lod2-4InvalidSurfaceCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_lod2_invalid_surface
        expr: |
          if env.get("__value").lod == "2" { 1 } else { 0 }
      - newAttribute: _num_lod3_invalid_surface
        expr: |
          if env.get("__value").lod == "3" { 1 } else { 0 }
      - newAttribute: _num_lod4_invalid_surface
        expr: |
          if env.get("__value").lod == "4" { 1 } else { 0 }
  - id: 88b8c9d0-1e2f-3a4b-5c6d-7e8f9a0b1c2d
    name: ErrorCount-Lod2InvalidSurface
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod2InvalidSurface
  - id: 99b9d0e1-2f3a-4b5c-6d7e-8f9a0b1c2d3e
    name: ErrorCount-Lod3InvalidSurface
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod3InvalidSurface
  - id: aabacbdc-3ede-4f5a-6b7c-8d9e0f1a2b3c
    name: ErrorCount-Lod4InvalidSurface
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod4InvalidSurface
  - id: aa1bb2cc-3dd4-4ee5-9ff6-0aa7bb8cc9dd
    name: GeometryCoercerLod0SurfaceIntersection
    type: action
    action: GeometryCoercer
    with:
      coercerType: lineString
  - id: cc3dd4ee-5ff6-4aa7-9bb8-2cc9dd0ee1aa
    name: TwoDimensionForcer
    type: action
    action: TwoDimensionForcer
  - id: bb2cc3dd-4ee5-4ff6-9aa7-1bb8cc9dd0ee
    name: AreaOnAreaOverlayerLod0
    type: action
    action: AreaOnAreaOverlayer
    with:
      accumulationMode: dropIncomingAttributes
      outputAttribute: overlap
      generateList: list
  - id: dd4ee5ff-6aa7-4bb8-9cc9-2dd0ee1ff2aa
    name: FeatureFilterByAreaOnAreaOverlap
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("__value").overlap > 1
        outputPort: intersectionSurface
  - id: ee1ff2aa-3bb4-4cc5-9dd6-7ee8ff3aa9bb
    name: ListIndexer1
    type: action
    action: ListIndexer
    with:
      listAttribute: list
      listIndexToCopy: 0
      copiedAttributeSuffix: _1
  - id: ff2aa3bb-4cc5-4dd6-9ee7-8ff9aa2bb0cc
    name: ListIndexer2
    type: action
    action: ListIndexer
    with:
      listAttribute: list
      listIndexToCopy: 1
      copiedAttributeSuffix: _2
  - id: ff6aa7bb-8cc9-4dd0-9ee1-4ff2aa3bb4cc
    name: AttributeMapperLod0SurfaceIntersection
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: filename_a
        expr: env.get("__value").gmlFilename_1
      - attribute: filename_b
        expr: env.get("__value").gmlFilename_2
      - attribute: feature_type_a
        expr: env.get("__value").featureType_1
      - attribute: feature_type_b
        expr: env.get("__value").featureType_2
      - attribute: lod_a
        expr: env.get("__value").lod_1
      - attribute: lod_b
        expr: env.get("__value").lod_2
      - attribute: gml_id_a
        expr: env.get("__value").gmlId_1
      - attribute: gml_id_b
        expr: env.get("__value").gmlId_2
      - attribute: issue
        expr: |
          "Surface Intersection"
  - id: aa7bb8cc-9dd0-4ee1-9ff2-5aa3bb4cc5dd
    name: FeatureWriterLod0SurfaceIntersection
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_LOD0面の交差.csv")
  - id: 99a9b0c1-2d3e-4f5a-6b7c-8d9e0f1a2b3c
    name: Lod0SurfaceIntersectionCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: filename_a
      calculations:
      - newAttribute: _num_lod0_surface_intersection
        expr: '1'
  - id: 00b0c1d2-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    name: ErrorCount-Lod0SurfaceIntersection
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod0SurfaceIntersection
  - id: 1a2b3c4d-5e6f-4a7b-8c9d-0e1f2a3b4c5d
    name: DestinationMeshCodeExtractor
    type: action
    action: PLATEAU4.DestinationMeshCodeExtractor
    with:
      meshType: 3
      epsgCode: env.get("prcs") ?? "6675"
      meshcodeAttr: meshcode
  - id: 2b3c4d5e-6f7a-4b8c-9d0e-1f2a3b4c5d6e
    name: MeshCodeTester
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          !env.get("__value").gmlFilename.starts_with(env.get("__value").meshcode)
        outputPort: failed
  - id: 3c4d5e6f-7a8b-4c9d-0e1f-2a3b4c5d6e8f
    name: AttributeMapperIncorrectMeshCode
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: gmlFilename
        expr: |
          env.get("__value").gmlFilename
      - attribute: filename
        expr: |
          env.get("__value").gmlFilename
      - attribute: feature_type
        expr: |
          env.get("__value").featureType
      - attribute: lod
        expr: |
          env.get("__value").lod
      - attribute: gml_id
        expr: |
          env.get("__value").gmlId
      - attribute: meshcode
        expr: |
          env.get("__value").meshcode
      - attribute: meshcount
        expr: |
          env.get("__value")._mesh_count
      - attribute: mesh2area
        expr: |
          env.get("__value")._meshcode_to_area
  - id: 77e7f8a9-0b1c-2d3e-4f5a-6b7c8d9e0f1a
    name: AttributeManagerIncorrectMeshCode
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: remove
  - id: 4d5e6f7a-8b9c-4d0e-1f2a-3b4c5d6e7f9a
    name: FeatureWriterIncorrectMeshCode
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_図郭不正.csv")
  - id: 11c1d2e3-4f5a-6b7c-8d9e-0f1a2b3c4d5e
    name: IncorrectMeshCodeCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_incorrect_meshcode
        expr: '1'
  - id: 22d2e3f4-5a6b-7c8d-9e0f-1a2b3c4d5e6f
    name: ErrorCount-IncorrectMeshCode
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountIncorrectMeshcode
  - id: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    name: OutputRouter
    type: action
    action: OutputRouter
    with:
      routingPort: fileOutput
  - id: ecaceb7b-ff98-4744-acf7-17e80829d6f3
    name: SolidBoundaryValidator
    type: action
    action: SolidBoundaryValidator
  - id: d0132191-a81f-4647-896d-5db49e3fb734
    name: FeatureFilterInvalidSolidBoundary
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          let issue = env.get("__value").solid_boundary_issues.issue;
          issue == "NotA2Manifold"
        outputPort: notClosed
  - id: e57bec12-7e6e-4edf-8ce2-14fbd12a7f92
    name: AttributeManagerSolidBoundaryInvalidNotClosed
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: rename
        value: filename
      - attribute: featureType
        method: rename
        value: feature_type
      - attribute: gmlId
        method: rename
        value: gml_id
      - attribute: issue
        method: create
        value: |
          "Surface Not Closed"
      - attribute: solid_boundary_issues
        method: remove
      - attribute: surfaceId
        method: remove
      - attribute: dirCodelists
        method: remove
      - attribute: featureIndex
        method: remove
      - attribute: dirSchemas
        method: remove
      - attribute: featureId
        method: remove
      - attribute: geometryName
        method: remove
      - attribute: featureParentId
        method: remove
      - attribute: root
        method: remove
      - attribute: gmlRootId
        method: remove
      - attribute: udxDirs
        method: remove
      - attribute: admin
        method: remove
      - attribute: cityGmlAttributes
        method: remove
      - attribute: package
        method: remove
      - attribute: area
        method: remove
      - attribute: fileIndex
        method: remove
      - attribute: dirRoot
        method: remove
      - attribute: gmlName
        method: remove
      - attribute: extension
        method: remove
      - attribute: maxLod
        method: remove
      - attribute: filename
        method: remove
      - attribute: gmlPath
        method: remove
  - id: 89712e8f-e0ac-4bb3-a92f-c5ff06fe4c96
    name: FeatureWriterL14-BoundaryNotClosed
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_非水密体.csv")
  - id: 33e3f4a5-6b7c-8d9e-0f1a-2b3c4d5e6f7a
    name: Lod1-4NotClosedSolidCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_lod1_not_closed_solid
        expr: |
          if env.get("__value").lod == "1" { 1 } else { 0 }
      - newAttribute: _num_lod2_not_closed_solid
        expr: |
          if env.get("__value").lod == "2" { 1 } else { 0 }
      - newAttribute: _num_lod3_not_closed_solid
        expr: |
          if env.get("__value").lod == "3" { 1 } else { 0 }
      - newAttribute: _num_lod4_not_closed_solid
        expr: |
          if env.get("__value").lod == "4" { 1 } else { 0 }
  - id: 44f4a5b6-7c8d-9e0f-1a2b-3c4d5e6f7a8b
    name: ErrorCount-Lod1NotClosedSolid
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod1NotClosedSolid
  - id: 64ff1eee-0d1a-42a1-b32d-fde94ffac693
    name: AttributeManagerSolidBoundaryInvalidOtherIssues
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: gmlFilename
        method: rename
        value: filename
      - attribute: featureType
        method: rename
        value: feature_type
      - attribute: gmlId
        method: rename
        value: gml_id
      - attribute: issue
        method: create
        value: |
          "InvalidSolidBoundaries"
      - attribute: solid_boundary_issues
        method: remove
      - attribute: surfaceId
        method: remove
      - attribute: dirCodelists
        method: remove
      - attribute: featureIndex
        method: remove
      - attribute: dirSchemas
        method: remove
      - attribute: featureId
        method: remove
      - attribute: geometryName
        method: remove
      - attribute: featureParentId
        method: remove
      - attribute: root
        method: remove
      - attribute: gmlRootId
        method: remove
      - attribute: udxDirs
        method: remove
      - attribute: admin
        method: remove
      - attribute: cityGmlAttributes
        method: remove
      - attribute: package
        method: remove
      - attribute: area
        method: remove
      - attribute: fileIndex
        method: remove
      - attribute: dirRoot
        method: remove
      - attribute: gmlName
        method: remove
      - attribute: extension
        method: remove
      - attribute: maxLod
        method: remove
      - attribute: filename
        method: remove
      - attribute: gmlPath
        method: remove
  - id: 527087b4-0411-49bd-ae5f-c1c7f9a5ccb8
    name: FeatureWriterL14-BoundaryOtherIssues
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_立体のエラー.csv")
  - id: 55a5b6c7-8d9e-0f1a-2b3c-4d5e6f7a8b9c
    name: Lod1-4SolidIssuesCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: gmlFilename
      calculations:
      - newAttribute: _num_lod1_solid_issues
        expr: |
          if env.get("__value").lod == "1" { 1 } else { 0 }
      - newAttribute: _num_lod2_solid_issues
        expr: |
          if env.get("__value").lod == "2" { 1 } else { 0 }
      - newAttribute: _num_lod3_solid_issues
        expr: |
          if env.get("__value").lod == "3" { 1 } else { 0 }
      - newAttribute: _num_lod4_solid_issues
        expr: |
          if env.get("__value").lod == "4" { 1 } else { 0 }
  - id: 66b6c7d8-9e0f-1a2b-3c4d-5e6f7a8b9c0d
    name: ErrorCount-Lod1SolidIssues
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod1SolidIssues
  - id: 77c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
    name: ErrorCount-Lod2NotClosedSolid
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod2NotClosedSolid
  - id: 88d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
    name: ErrorCount-Lod3NotClosedSolid
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod3NotClosedSolid
  - id: 99e9f0a1-2b3c-4d5e-6f7a-8b9c0d1e2f3a
    name: ErrorCount-Lod4NotClosedSolid
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod4NotClosedSolid
  - id: aaf0a1b2-3c4d-5e6f-7a8b-9c0d1e2f3a4b
    name: ErrorCount-Lod2SolidIssues
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod2SolidIssues
  - id: bbf1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    name: ErrorCount-Lod3SolidIssues
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod3SolidIssues
  - id: ccf2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    name: ErrorCount-Lod4SolidIssues
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod4SolidIssues
  - id: 6e8e985a-8ae5-46cd-8521-74f0f74a7ec2
    name: SolidBoundaryNotClosedIssueCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: filename
      calculations:
      - newAttribute: _num_lod1_not_closed_solid
        expr: '1'
  - id: bc5638de-624d-46a2-a40b-59dde392ff97
    name: SolidBoundaryNotClosedIssueCountOutputRouter
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod1NotClosedSolid
  - id: 016a8afe-3aa7-4047-8c8c-9f6f8464b03c
    name: SolidBoundaryOtherIssueCounter
    type: action
    action: StatisticsCalculator
    with:
      aggregateName: gmlFilename
      aggregateAttribute: filename
      calculations:
      - newAttribute: _num_lod1_solid_issues
        expr: '1'
  - id: 26ad749b-0ee1-4f6e-b8e0-8f3ff2fe4056
    name: SolidBoundaryOtherIssueCountOutputRouter
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountLod1SolidIssues
  edges:
  - id: 8c4d7e2a-5b6f-4918-a3e5-9d1c8b7a6e4f
    from: 5d8f3c2e-9a4b-4e1c-8f7a-3c5d9e2b8a1f
    to: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    fromPort: default
    toPort: default
  - id: 2f5a8c9d-6e3b-4c7a-9f8e-1d4c7b5a9e2f
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: 3c8d9e7f-2a5b-4f1c-8e6a-9d3c5b8e1a4f
    fromPort: lod0
    toPort: default
  - id: 9b7d5e3c-4f8a-4e2b-9c1a-8d6f5b3e7c2a
    from: 3c8d9e7f-2a5b-4f1c-8e6a-9d3c5b8e1a4f
    to: a7b3c9e5-4f8d-4c2e-9a1b-6e3f5d8c2a7b
    fromPort: inCorrectOrientation
    toPort: default
  - id: 6d4c8e2b-7a5f-4b3e-8c9a-5e2d9b6c8f1a
    from: a7b3c9e5-4f8d-4c2e-9a1b-6e3f5d8c2a7b
    to: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    fromPort: default
    toPort: default
  - id: 7c1e5b9d-3f8a-4e2c-9b6d-8a5c2e7f4b1c
    from: 3c8d9e7f-2a5b-4f1c-8e6a-9d3c5b8e1a4f
    to: 33c3d4e5-6f7a-8b9c-0d1e-2f3a4b5c6d7e
    fromPort: invalidSurface
    toPort: default
  - id: e3c7d1b5-9a4f-4e8b-8c2d-6f1a9e3b8c5d
    from: 33c3d4e5-6f7a-8b9c-0d1e-2f3a4b5c6d7e
    to: b1f5a9c3-7e2d-4a8c-9f6b-2d8e5c3a7b9f
    fromPort: complete
    toPort: default
  - id: e3c7d1b5-9a4f-4e8b-8c2d-6f1a9e3b8c5e
    from: b1f5a9c3-7e2d-4a8c-9f6b-2d8e5c3a7b9f
    to: f8e2a4c6-5d9b-4f7e-8c3a-1e6d4b8f2c5a
    fromPort: default
    toPort: default
  - id: e3c7d1b5-9a4f-4e8b-8c2d-6f1a9e3b8c5f
    from: 33c3d4e5-6f7a-8b9c-0d1e-2f3a4b5c6d7e
    to: 44d4e5f6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
    fromPort: default
    toPort: default
  - id: 4b6e8f2d-9c3a-4e7f-8b1d-5a9c2e6f8b3d
    from: f8e2a4c6-5d9b-4f7e-8c3a-1e6d4b8f2c5a
    to: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    fromPort: default
    toPort: default
  - id: 6a4ed27d-58b6-4021-ae4c-d919534e5fb3
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: 950407af-eec5-49ee-902c-2b41f31150d3
    fromPort: lod1
    toPort: default
  - id: 8f3b5d9e-7c2a-4e6f-9d3b-5a8c1e4f7b2d
    from: 950407af-eec5-49ee-902c-2b41f31150d3
    to: 55e5f6a7-8b9c-0d1e-2f3a-4b5c6d7e8f9a
    fromPort: invalidSurface
    toPort: default
  - id: 2a6c8f4d-5e9b-4c7a-8f2d-9b5e3c6a8f1d
    from: 55e5f6a7-8b9c-0d1e-2f3a-4b5c6d7e8f9a
    to: c2e8f4a6-9b3d-4e7c-8a5f-1d9b6e4c7f2a
    fromPort: complete
    toPort: default
  - id: 2a6c8f4d-5e9b-4c7a-8f2d-9b5e3c6a8f1f
    from: 55e5f6a7-8b9c-0d1e-2f3a-4b5c6d7e8f9a
    to: 66f6a7b8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
    fromPort: default
    toPort: default
  - id: 2a6c8f4d-5e9b-4c7a-8f2d-9b5e3c6a8f1e
    from: c2e8f4a6-9b3d-4e7c-8a5f-1d9b6e4c7f2a
    to: d5a7b9f3-6e4c-4d8a-9f2b-3c7e8d5a6b9f
    fromPort: default
    toPort: default
  - id: 7e1d9c5b-3f8a-4e2c-9b6d-8a5c2e7f4b1c
    from: d5a7b9f3-6e4c-4d8a-9f2b-3c7e8d5a6b9f
    to: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    fromPort: default
    toPort: default
  - id: 9d3f6a8e-4c7b-4e2a-8f5d-2b9c5e8a1f6d
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: 4f7a9b2e-5c8d-4e3a-9f6b-1d4c7e9a2b5f
    fromPort: lod2
    toPort: default
  - id: 8e5b7c4f-2a9d-4f6e-9c3b-7a4f8e2c5b9d
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: 4f7a9b2e-5c8d-4e3a-9f6b-1d4c7e9a2b5f
    fromPort: lod3
    toPort: default
  - id: 6c2e9f5a-7b4d-4c8e-9f2a-5d8c3e6f9b2a
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: 4f7a9b2e-5c8d-4e3a-9f6b-1d4c7e9a2b5f
    fromPort: lod4
    toPort: default
  - id: 1a5f3c8d-9e2b-4d7a-8c6f-5b9e3d2a6f8c
    from: 4f7a9b2e-5c8d-4e3a-9f6b-1d4c7e9a2b5f
    to: 3b6e9c5d-8f2a-4d7b-9e3c-6a1f4b9e2c5d
    fromPort: default
    toPort: default
  - id: 2b6f4d9e-3c8a-4e5b-9d7c-6a8f2e5c9b4d
    from: 3b6e9c5d-8f2a-4d7b-9e3c-6a1f4b9e2c5d
    to: 7f2a5c8d-4b9e-4c3a-9f6d-2e8b5c7a4f9d
    fromPort: invalidSurface
    toPort: default
  - id: 3c7f5e0a-4d9b-4f6c-8e4a-7b0f3c6d8e5a
    from: 7f2a5c8d-4b9e-4c3a-9f6d-2e8b5c7a4f9d
    to: 77a7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    fromPort: default
    toPort: default
  - id: 4d8f6f1b-5e0c-4f7d-9f5b-8c1f4d7e0f6b
    from: 77a7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    to: 9e3c6b8f-5a2d-4f7e-8c1a-4d9b6e3c8f5a
    fromPort: complete
    toPort: default
  - id: 5e9f7f2c-6f0d-4f8e-af6c-9d2f5e7f0f7c
    from: 9e3c6b8f-5a2d-4f7e-8c1a-4d9b6e3c8f5a
    to: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    fromPort: default
    toPort: default
  - id: 6faf8f3d-7f1e-4f9f-bf7d-ae3f6e8f1f8d
    from: 77a7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    to: 88b8c9d0-1e2f-3a4b-5c6d-7e8f9a0b1c2d
    fromPort: default
    toPort: default
  - id: 7fbf9f4e-8f2f-4faf-cf8e-bf4f7e9f2f9e
    from: 77a7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    to: 99b9d0e1-2f3a-4b5c-6d7e-8f9a0b1c2d3e
    fromPort: default
    toPort: default
  - id: 8fcfaf5f-9f3f-4fbf-df9f-cf5f8faf3faf
    from: 77a7b8c9-0d1e-2f3a-4b5c-6d7e8f9a0b1c
    to: aabacbdc-3ede-4f5a-6b7c-8d9e0f1a2b3c
    fromPort: default
    toPort: default
  - id: 11aa22bb-33cc-44dd-55ee-66ff77aa88bb
    from: 3c8d9e7f-2a5b-4f1c-8e6a-9d3c5b8e1a4f
    to: aa1bb2cc-3dd4-4ee5-9ff6-0aa7bb8cc9dd
    fromPort: default
    toPort: default
  - id: cc3dd4ee-5ff6-4aa7-9bb8-2cc9dd0ee1ff
    from: aa1bb2cc-3dd4-4ee5-9ff6-0aa7bb8cc9dd
    to: cc3dd4ee-5ff6-4aa7-9bb8-2cc9dd0ee1aa
    fromPort: default
    toPort: default
  - id: cc3dd4ee-5ff6-4aa7-9bb8-2cc9dd0ee1bb
    from: cc3dd4ee-5ff6-4aa7-9bb8-2cc9dd0ee1aa
    to: bb2cc3dd-4ee5-4ff6-9aa7-1bb8cc9dd0ee
    fromPort: default
    toPort: default
  - id: ee5ff6aa-7bb8-4cc9-9dd0-3ee1ff2aa3bb
    from: bb2cc3dd-4ee5-4ff6-9aa7-1bb8cc9dd0ee
    to: dd4ee5ff-6aa7-4bb8-9cc9-2dd0ee1ff2aa
    fromPort: area
    toPort: default
  - id: bb8cc9dd-0ee1-4ff2-9aa3-6bb4cc5dd6ee
    from: dd4ee5ff-6aa7-4bb8-9cc9-2dd0ee1ff2aa
    to: ee1ff2aa-3bb4-4cc5-9dd6-7ee8ff3aa9bb
    fromPort: intersectionSurface
    toPort: default
  - id: aa2bb3cc-4dd5-4ee6-9ff7-8aa0bb1cc2dd
    from: ee1ff2aa-3bb4-4cc5-9dd6-7ee8ff3aa9bb
    to: ff2aa3bb-4cc5-4dd6-9ee7-8ff9aa2bb0cc
    fromPort: default
    toPort: default
  - id: bb3cc4dd-5ee6-4ff7-9aa8-9bb0cc1dd2ee
    from: ff2aa3bb-4cc5-4dd6-9ee7-8ff9aa2bb0cc
    to: ff6aa7bb-8cc9-4dd0-9ee1-4ff2aa3bb4cc
    fromPort: default
    toPort: default
  - id: cc9dd0ee-1ff2-4aa3-9bb4-7cc5dd6ee7ff
    from: ff6aa7bb-8cc9-4dd0-9ee1-4ff2aa3bb4cc
    to: 99a9b0c1-2d3e-4f5a-6b7c-8d9e0f1a2b3c
    fromPort: default
    toPort: default
  - id: cc9dd0ee-1ff2-4aa3-9bb4-7cc5dd6ee7fe
    from: 99a9b0c1-2d3e-4f5a-6b7c-8d9e0f1a2b3c
    to: aa7bb8cc-9dd0-4ee1-9ff2-5aa3bb4cc5dd
    fromPort: complete
    toPort: default
  - id: cc9dd0ee-1ff2-4aa3-9bb4-7cc5dd6ee7fd
    from: 99a9b0c1-2d3e-4f5a-6b7c-8d9e0f1a2b3c
    to: 00b0c1d2-3e4f-5a6b-7c8d-9e0f1a2b3c4d
    fromPort: default
    toPort: default
  - id: cc3dd4ee-5ff6-4aa7-9bb8-2cc9dd0ee1cc
    from: cc3dd4ee-5ff6-4aa7-9bb8-2cc9dd0ee1aa
    to: 1a2b3c4d-5e6f-4a7b-8c9d-0e1f2a3b4c5d
    fromPort: default
    toPort: default
  - id: 3c4d5e6f-7a8b-4c9d-0e1f-2a3b4c5d6e7f
    from: 1a2b3c4d-5e6f-4a7b-8c9d-0e1f2a3b4c5d
    to: 2b3c4d5e-6f7a-4b8c-9d0e-1f2a3b4c5d6e
    fromPort: default
    toPort: default
  - id: 4d5e6f7a-8b9c-4d0e-1f2a-3b4c5d6e7f8a
    from: 2b3c4d5e-6f7a-4b8c-9d0e-1f2a3b4c5d6e
    to: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    fromPort: default
    toPort: default
  - id: dd0ee1ff-2aa3-4bb4-9cc5-8dd6ee7ff8aa
    from: aa7bb8cc-9dd0-4ee1-9ff2-5aa3bb4cc5dd
    to: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    fromPort: default
    toPort: default
  - id: 1edf5ec7-a567-4ef6-9c70-92497d359ddf
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    fromPort: lod1
    to: ecaceb7b-ff98-4744-acf7-17e80829d6f3
    toPort: default
  - id: 2fef6fd8-b678-5fa7-0d81-a350ae46aeee
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    fromPort: lod2
    to: ecaceb7b-ff98-4744-acf7-17e80829d6f3
    toPort: default
  - id: 3ffa7ae9-c789-6fb8-1e92-b461bf57bfff
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    fromPort: lod3
    to: ecaceb7b-ff98-4744-acf7-17e80829d6f3
    toPort: default
  - id: 4ffb8bfa-d890-7fc9-2fa3-c572cf68cfff
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    fromPort: lod4
    to: ecaceb7b-ff98-4744-acf7-17e80829d6f3
    toPort: default
  - id: bf5d73d5-a6c6-4a06-bd22-52a02fdbd96f
    from: ecaceb7b-ff98-4744-acf7-17e80829d6f3
    to: d0132191-a81f-4647-896d-5db49e3fb734
    fromPort: failed
    toPort: default
  - id: 337a1460-27bf-4df9-8d8b-08c5c84509d1
    from: d0132191-a81f-4647-896d-5db49e3fb734
    to: e57bec12-7e6e-4edf-8ce2-14fbd12a7f92
    fromPort: notClosed
    toPort: default
  - id: 7a034ade-628d-4a74-ba34-069d744c15f4
    from: e57bec12-7e6e-4edf-8ce2-14fbd12a7f92
    to: 89712e8f-e0ac-4bb3-a92f-c5ff06fe4c96
    fromPort: default
    toPort: default
  - id: 9c6792d9-f844-42dd-aca4-eeb34f691c0e
    from: d0132191-a81f-4647-896d-5db49e3fb734
    to: 64ff1eee-0d1a-42a1-b32d-fde94ffac693
    fromPort: unfiltered
    toPort: default
  - id: 819866a6-4e4d-44c5-a2df-2cb6b1645a0c
    from: 64ff1eee-0d1a-42a1-b32d-fde94ffac693
    to: 527087b4-0411-49bd-ae5f-c1c7f9a5ccb8
    fromPort: default
    toPort: default
  - id: 4de69165-d302-4392-9899-af387553f5a8
    from: e57bec12-7e6e-4edf-8ce2-14fbd12a7f92
    to: 6e8e985a-8ae5-46cd-8521-74f0f74a7ec2
    fromPort: default
    toPort: default
  - id: 1478ecb6-8c64-4b25-80f1-eb158be5a9c5
    from: 6e8e985a-8ae5-46cd-8521-74f0f74a7ec2
    to: bc5638de-624d-46a2-a40b-59dde392ff97
    fromPort: default
    toPort: default
  - id: 24fe89e5-ee96-422a-9047-edd122c64c79
    from: 64ff1eee-0d1a-42a1-b32d-fde94ffac693
    to: 016a8afe-3aa7-4047-8c8c-9f6f8464b03c
    fromPort: default
    toPort: default
  - id: 01cef8a5-e953-4895-ad8e-93edbf2e65ae
    from: 016a8afe-3aa7-4047-8c8c-9f6f8464b03c
    to: 26ad749b-0ee1-4f6e-b8e0-8f3ff2fe4056
    fromPort: default
    toPort: default
  - id: 5eff6aa7-fa23-4392-0b00-bf488644f6a9
    from: 33e3f4a5-6b7c-8d9e-0f1a-2b3c4d5e6f7a
    to: 44f4a5b6-7c8d-9e0f-1a2b-3c4d5e6f7a8b
    fromPort: default
    toPort: default
  - id: 6ffe7bb8-0b34-5493-1c11-cf599755f7ba
    from: 33e3f4a5-6b7c-8d9e-0f1a-2b3c4d5e6f7a
    to: 77c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
    fromPort: default
    toPort: default
  - id: 7ffe8cc9-1c45-6594-2d22-df6aa866f8cb
    from: 33e3f4a5-6b7c-8d9e-0f1a-2b3c4d5e6f7a
    to: 88d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
    fromPort: default
    toPort: default
  - id: 8ffe9dda-2d56-7695-3e33-ef7bb977f9dc
    from: 33e3f4a5-6b7c-8d9e-0f1a-2b3c4d5e6f7a
    to: 99e9f0a1-2b3c-4d5e-6f7a-8b9c0d1e2f3a
    fromPort: default
    toPort: default
  - id: 9ffeaeeb-3e67-8796-4f44-ff8cca88faed
    from: 55a5b6c7-8d9e-0f1a-2b3c-4d5e6f7a8b9c
    to: 66b6c7d8-9e0f-1a2b-3c4d-5e6f7a8b9c0d
    fromPort: default
    toPort: default
  - id: affebbfc-4f78-9897-5f55-ffaddb99fbfe
    from: 55a5b6c7-8d9e-0f1a-2b3c-4d5e6f7a8b9c
    to: aaf0a1b2-3c4d-5e6f-7a8b-9c0d1e2f3a4b
    fromPort: default
    toPort: default
  - id: bffeccfd-5f89-a998-6f66-ffbeeccaafcf
    from: 55a5b6c7-8d9e-0f1a-2b3c-4d5e6f7a8b9c
    to: bbf1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
    fromPort: default
    toPort: default
  - id: cffedfee-6f9a-ba99-7f77-ffcffddbbfdf
    from: 55a5b6c7-8d9e-0f1a-2b3c-4d5e6f7a8b9c
    to: ccf2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
    fromPort: default
    toPort: default
  - id: 5e6f7a8b-9c0d-4e1f-2a3b-4c5d6e7f8a9b
    from: 2b3c4d5e-6f7a-4b8c-9d0e-1f2a3b4c5d6e
    to: 3c4d5e6f-7a8b-4c9d-0e1f-2a3b4c5d6e8f
    fromPort: failed
    toPort: default
  - id: 6f7a8b9c-0d1e-4f2a-3b4c-5d6e7f8a9b0c
    from: 3c4d5e6f-7a8b-4c9d-0e1f-2a3b4c5d6e8f
    to: 77e7f8a9-0b1c-2d3e-4f5a-6b7c8d9e0f1a
    fromPort: default
    toPort: default
  - id: 66d6e7f8-9a0b-1c2d-3e4f-5a6b7c8d9e0f
    from: 77e7f8a9-0b1c-2d3e-4f5a-6b7c8d9e0f1a
    to: 4d5e6f7a-8b9c-4d0e-1f2a-3b4c5d6e7f9a
    fromPort: default
    toPort: default
  - id: 88f8a9b0-1c2d-3e4f-5a6b-7c8d9e0f1a2b
    from: 3c4d5e6f-7a8b-4c9d-0e1f-2a3b4c5d6e8f
    to: 11c1d2e3-4f5a-6b7c-8d9e-0f1a2b3c4d5e
    fromPort: default
    toPort: default
  - id: 99a9b0c1-2d3e-4f5a-6b7c-8d9e0f1a2b3c
    from: 11c1d2e3-4f5a-6b7c-8d9e-0f1a2b3c4d5e
    to: 22d2e3f4-5a6b-7c8d-9e0f-1a2b3c4d5e6f
    fromPort: default
    toPort: default
  - id: 7a8b9c0d-1e2f-403b-4c5d-6e7f8a9b0c1d
    from: 4d5e6f7a-8b9c-4d0e-1f2a-3b4c5d6e7f9a
    to: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    fromPort: default
    toPort: default
  - id: 8b9c0d1e-2f3a-4b5c-6d7e-8f9a0b1c2d3e
    from: 89712e8f-e0ac-4bb3-a92f-c5ff06fe4c96
    to: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    fromPort: default
    toPort: default
  - id: 9c0d1e2f-3a4b-5c6d-7e8f-9a0b1c2d3e4f
    from: 527087b4-0411-49bd-ae5f-c1c7f9a5ccb8
    to: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
    fromPort: default
    toPort: default
  ports:
    outputs:
    - id: errorCountLod0IncorrectOrientation
      nodeId: 22b2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
      port: default
    - id: errorCountLod0InvalidSurface
      nodeId: 44d4e5f6-7a8b-9c0d-1e2f-3a4b5c6d7e8f
      port: default
    - id: errorCountLod0SurfaceIntersection
      nodeId: 00b0c1d2-3e4f-5a6b-7c8d-9e0f1a2b3c4d
      port: default
    - id: errorCountLod1InvalidSurface
      nodeId: 66f6a7b8-9c0d-1e2f-3a4b-5c6d7e8f9a0b
      port: default
    - id: errorCountLod1NotClosedSolid
      nodeId: bc5638de-624d-46a2-a40b-59dde392ff97
      port: default
    - id: errorCountLod1SolidIssues
      nodeId: 26ad749b-0ee1-4f6e-b8e0-8f3ff2fe4056
      port: default
    - id: errorCountLod2InvalidSurface
      nodeId: 88b8c9d0-1e2f-3a4b-5c6d-7e8f9a0b1c2d
      port: default
    - id: errorCountLod3InvalidSurface
      nodeId: 99b9d0e1-2f3a-4b5c-6d7e-8f9a0b1c2d3e
      port: default
    - id: errorCountLod4InvalidSurface
      nodeId: aabacbdc-3ede-4f5a-6b7c-8d9e0f1a2b3c
      port: default
    - id: errorCountIncorrectMeshcode
      nodeId: 22d2e3f4-5a6b-7c8d-9e0f-1a2b3c4d5e6f
      port: default
    - id: errorCountLod2NotClosedSolid
      nodeId: 77c7d8e9-0f1a-2b3c-4d5e-6f7a8b9c0d1e
      port: default
    - id: errorCountLod3NotClosedSolid
      nodeId: 88d8e9f0-1a2b-3c4d-5e6f-7a8b9c0d1e2f
      port: default
    - id: errorCountLod4NotClosedSolid
      nodeId: 99e9f0a1-2b3c-4d5e-6f7a-8b9c0d1e2f3a
      port: default
    - id: errorCountLod2SolidIssues
      nodeId: aaf0a1b2-3c4d-5e6f-7a8b-9c0d1e2f3a4b
      port: default
    - id: errorCountLod3SolidIssues
      nodeId: bbf1b2c3-4d5e-6f7a-8b9c-0d1e2f3a4b5c
      port: default
    - id: errorCountLod4SolidIssues
      nodeId: ccf2c3d4-5e6f-7a8b-9c0d-1e2f3a4b5c6d
      port: default
    - id: fileOutput
      nodeId: 5e2c9b7a-8d4f-4b1e-9c6a-3f5d8b2e7c4a
      port: default
- id: 8a6c4f2e-9b1d-4e7a-b3c5-6f8e2a4b9d7c
  name: entry_point
  nodes:
  - id: 4d7b9e2a-5c8f-41d6-b9a3-7e1c5f8d2b9a
    name: FeatureCreator
    type: action
    action: FeatureCreator
    with:
      creator: |
        [
          #{
            cityGmlPath: env.get("cityGmlPath"),
            cityCode: env.get("cityCode") ?? file::extract_filename(env.get("cityGmlPath"))[0..5],
            baseCityCode: env.get("cityCode") ?? file::extract_filename(env.get("cityGmlPath"))[0..5],
            objectListPath: env.get("objectLists"),
            codelists: env.get("codelists"),
            schemas: env.get("schemas"),
          },
        ]
  - id: c7315341-26b3-4405-9d02-039d721cd225
    name: DirectoryDecompressor
    type: action
    action: DirectoryDecompressor
    with:
      archiveAttributes:
      - codelists
      - schemas
  - id: 2aaa4ac9-2e79-479f-aa50-6543f461a76e
    name: FeatureFilePathExtractor
    type: action
    action: FeatureFilePathExtractor
    with:
      destPrefix: udx
      sourceDataset: |
        env.get("__value")["cityGmlPath"]
      extractArchive: true
  - id: 0daf7972-4d58-4ccd-a576-f3dfc418f749
    name: FeatureFilterByGml
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: |
          env.get("__value").extension == "gml"
        outputPort: default
  - id: 151fbadf-1b40-4264-a003-f6f11f6af2d6
    name: FeatureCounterFileIndex
    type: action
    action: FeatureCounter
    with:
      countStart: 1
      outputAttribute: fileIndex
  - id: 7e833060-f8c4-458b-a8cc-8c817527f25b
    name: PLATEAU4.UDXFolderExtractor
    type: action
    action: PLATEAU4.UDXFolderExtractor
    with:
      cityGmlPath: |
        env.get("__value")["path"]
      codelistsPath: codelists
      schemasPath: schemas
  - id: 7a561c34-2e94-4883-91e4-4026b09c2f8a
    name: ReferenceAndTypeChecker
    type: subGraph
    subGraphId: 34e55bec-9185-4a66-9c41-3dbddc1e64fa
  - id: 3f7b2a9d-1c8e-4a6f-b5d3-9e2c7a4f8b1d
    name: FeatureCityGmlReader
    type: action
    action: FeatureCityGmlReader
    with:
      format: citygml
      flatten: true
      dataset: |
        env.get("__value")["gmlPath"]
  - id: 7c3e8b1f-2a9d-4f6c-8e5a-9b2d4f7c1e8a
    name: AttributeManager
    type: action
    action: AttributeManager
    with:
      operations:
      - attribute: path
        method: rename
        value: gmlPath
      - attribute: name
        method: rename
        value: gmlFilename
      - attribute: cityGmlPath
        method: remove
  - id: a8a7e7f8-8d73-4078-9cff-4476924f2ad7
    name: FeatureSorter
    type: action
    action: FeatureSorter
    with:
      attributes:
      - fileIndex
      order: ascending
  - id: 5a7b1469-217a-4d4b-bb01-971a9f9140d8
    name: FeatureCounterFeatureIndex
    type: action
    action: FeatureCounter
    with:
      countStart: 0
      outputAttribute: featureIndex
  - id: 2b8c4e7a-9f1d-4a3b-c6e8-5d2a7b9c1e4f
    name: FeatureFilterBuildingPart
    type: action
    action: FeatureFilter
    with:
      conditions:
      - expr: 'true'
        outputPort: default
      - expr: |
          env.get("__value").featureType == "bldg:BuildingPart"
        outputPort: buildingPart
  - id: 7f3a8d2c-4e6b-4d9a-b1c5-3e8f2a7d9c4b
    name: FormatChecker
    type: subGraph
    subGraphId: 36d6a846-80a8-48e9-9c34-d7c0b8af2d6d
  - id: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    name: SurfaceValidation
    type: subGraph
    subGraphId: a9952b0d-e085-4a0b-bb76-fa36b969c96b
  - id: 3e9f7c2a-8b4d-4e1f-a9c5-6b8e2c4a7d9f
    name: BuildingPartValidation
    type: subGraph
    subGraphId: 1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d
  - id: b1c2d3e4-5f6a-7b8c-9d0e-1f2a3b4c5d6e
    name: FileInfoExtractor
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: index
        expr: |
          env.get("__value").fileIndex
      - attribute: filename
        expr: |
          env.get("__value").gmlFilename
  - id: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    name: ErrorSummaryMerger
    type: action
    action: FeatureMerger
    with:
      requestorAttributeValue: |
        env.get("__value").filename
      supplierAttributeValue: |
        env.get("__value").gmlFilename
  - id: d3e4f5a6-7b8c-9d0e-1f2a-3b4c5d6e7f8a
    name: SummaryAttributeMapper
    type: action
    action: AttributeMapper
    with:
      mappers:
      - attribute: Index
        expr: |
          env.get("__value").index
      - attribute: Filename
        expr: |
          env.get("__value").filename
      - attribute: WallSurface
        expr: |
          env.get("__value").WallSurface ?? 0
      - attribute: BuildingFurniture
        expr: |
          env.get("__value").BuildingFurniture ?? 0
      - attribute: Building
        expr: |
          env.get("__value").Building ?? 0
      - attribute: OuterCeilingSurface
        expr: |
          env.get("__value").OuterCeilingSurface ?? 0
      - attribute: BuildingInstallation
        expr: |
          env.get("__value").BuildingInstallation ?? 0
      - attribute: ClosureSurface
        expr: |
          env.get("__value").ClosureSurface ?? 0
      - attribute: InteriorWallSurface
        expr: |
          env.get("__value").InteriorWallSurface ?? 0
      - attribute: RoofSurface
        expr: |
          env.get("__value").RoofSurface ?? 0
      - attribute: Room
        expr: |
          env.get("__value").Room ?? 0
      - attribute: OuterFloorSurface
        expr: |
          env.get("__value").OuterFloorSurface ?? 0
      - attribute: GroundSurface
        expr: |
          env.get("__value").GroundSurface ?? 0
      - attribute: Window
        expr: |
          env.get("__value").Window ?? 0
      - attribute: CeilingSurface
        expr: |
          env.get("__value").CeilingSurface ?? 0
      - attribute: BuildingPart
        expr: |
          env.get("__value").BuildingPart ?? 0
      - attribute: FloorSurface
        expr: |
          env.get("__value").FloorSurface ?? 0
      - attribute: Door
        expr: |
          env.get("__value").Door ?? 0
      - attribute: IntBuildingInstallation
        expr: |
          env.get("__value").IntBuildingInstallation ?? 0
      - attribute: 市区町村コードエラー
        expr: |
          env.get("__value")._num_incorrect_city_code ?? 0
      - attribute: C-bldg-01 エラー
        expr: |
          env.get("__value")._num_duplicate_building_id ?? 0
      - attribute: 不正な建物ID
        expr: |
          env.get("__value")._num_missing_building_id ?? 0
      - attribute: L-bldg-02 エラー
        expr: |
          env.get("__value")._num_lbldg02_error ?? 0
      - attribute: L-bldg-04,05 エラー
        expr: |
          env.get("__value")._num_incorrect_usage_attribute ?? 0
      - attribute: L-bldg-06 エラー
        expr: |
          env.get("__value")._num_lbldg06_error ?? 0
      - attribute: T-bldg-02エラー
        expr: |
          env.get("__value")._num_invalid_bldginst_geom_type ?? 0
      - attribute: LOD0 面のエラー
        expr: |
          env.get("__value")._num_lod0_invalid_surface ?? 0
      - attribute: LOD0 面の向きエラー
        expr: |
          env.get("__value")._num_lod0_incorrect_orientation ?? 0
      - attribute: LOD0 面の交差
        expr: |
          env.get("__value")._num_lod0_surface_intersection ?? 0
      - attribute: LOD1 境界面のエラー
        expr: |
          env.get("__value")._num_lod1_invalid_surface ?? 0
      - attribute: LOD1 非水密立体
        expr: |
          env.get("__value")._num_lod1_not_closed_solid ?? 0
      - attribute: LOD1 立体のエラー
        expr: |
          env.get("__value")._num_lod1_solid_issues ?? 0
      - attribute: LOD2 境界面のエラー
        expr: |
          env.get("__value")._num_lod2_invalid_surface ?? 0
      - attribute: LOD3 境界面のエラー
        expr: |
          env.get("__value")._num_lod3_invalid_surface ?? 0
      - attribute: LOD4 境界面のエラー
        expr: |
          env.get("__value")._num_lod4_invalid_surface ?? 0
      - attribute: LOD2 非水密立体
        expr: |
          env.get("__value")._num_lod2_not_closed_solid ?? 0
      - attribute: LOD3 非水密立体
        expr: |
          env.get("__value")._num_lod3_not_closed_solid ?? 0
      - attribute: LOD4 非水密立体
        expr: |
          env.get("__value")._num_lod4_not_closed_solid ?? 0
      - attribute: LOD2 立体のエラー
        expr: |
          env.get("__value")._num_lod2_solid_issues ?? 0
      - attribute: LOD3 立体のエラー
        expr: |
          env.get("__value")._num_lod3_solid_issues ?? 0
      - attribute: LOD4 立体のエラー
        expr: |
          env.get("__value")._num_lod4_solid_issues ?? 0
      - attribute: 図郭不正
        expr: |
          env.get("__value")._num_incorrect_meshcode ?? 0
      - attribute: LOD0-1のBuildingPart
        expr: |
          env.get("__value")._num_lod0_1_buildingpart ?? 0
  - id: e4f5a6b7-8c9d-0e1f-2a3b-4c5d6e7f8a9b
    name: CSVSummaryWriter
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "02_建築物_検査結果一覧.csv")
  - id: f5a6b7c8-9d0e-1f2a-3b4c-5d6e7f8a9b0c
    name: StatisticsCalculator
    type: action
    action: StatisticsCalculator
    with:
      calculations:
      - newAttribute: C-bldg-01 エラー
        expr: |
          env.get("__value")["C-bldg-01 エラー"] ?? 0
      - newAttribute: 不正な建物ID
        expr: |
          env.get("__value")["不正な建物ID"] ?? 0
      - newAttribute: 市区町村コードエラー
        expr: |
          env.get("__value")["市区町村コードエラー"] ?? 0
      - newAttribute: L-bldg-02 エラー
        expr: |
          env.get("__value")["L-bldg-02 エラー"] ?? 0
      - newAttribute: L-bldg-04,05 エラー
        expr: |
          env.get("__value")["L-bldg-04,05 エラー"] ?? 0
      - newAttribute: L-bldg-06 エラー
        expr: |
          env.get("__value")["L-bldg-06 エラー"] ?? 0
      - newAttribute: LOD0 面のエラー
        expr: |
          env.get("__value")["LOD0 面のエラー"] ?? 0
      - newAttribute: LOD0 面の向きエラー
        expr: |
          env.get("__value")["LOD0 面の向きエラー"] ?? 0
      - newAttribute: LOD0 面の交差
        expr: |
          env.get("__value")["LOD0 面の交差"] ?? 0
      - newAttribute: LOD1 境界面のエラー
        expr: |
          env.get("__value")["LOD1 境界面のエラー"] ?? 0
      - newAttribute: LOD1 非水密立体
        expr: |
          env.get("__value")["LOD1 非水密立体"] ?? 0
      - newAttribute: LOD1 立体のエラー
        expr: |
          env.get("__value")["LOD1 立体のエラー"] ?? 0
      - newAttribute: LOD1 立体の交差
        expr: |
          0
      - newAttribute: LOD2 境界面のエラー
        expr: |
          env.get("__value")["LOD2 境界面のエラー"] ?? 0
      - newAttribute: LOD2 非水密立体
        expr: |
          env.get("__value")["LOD2 非水密立体"] ?? 0
      - newAttribute: LOD2 立体のエラー
        expr: |
          env.get("__value")["LOD2 立体のエラー"] ?? 0
      - newAttribute: LOD2 立体の交差
        expr: |
          0
      - newAttribute: LOD3 境界面のエラー
        expr: |
          env.get("__value")["LOD3 境界面のエラー"] ?? 0
      - newAttribute: LOD3 非水密立体
        expr: |
          env.get("__value")["LOD3 非水密立体"] ?? 0
      - newAttribute: LOD3 立体のエラー
        expr: |
          env.get("__value")["LOD3 立体のエラー"] ?? 0
      - newAttribute: LOD3 立体の交差
        expr: |
          0
      - newAttribute: LOD4 境界面のエラー
        expr: |
          env.get("__value")["LOD4 境界面のエラー"] ?? 0
      - newAttribute: LOD4 非水密立体
        expr: |
          env.get("__value")["LOD4 非水密立体"] ?? 0
      - newAttribute: LOD4 立体のエラー
        expr: |
          env.get("__value")["LOD4 立体のエラー"] ?? 0
      - newAttribute: LOD4 立体の交差
        expr: |
          0
      - newAttribute: T-bldg-02エラー
        expr: |
          env.get("__value")["T-bldg-02エラー"] ?? 0
      - newAttribute: LOD0-1のBuildingPart
        expr: |
          env.get("__value")["LOD0-1のBuildingPart"] ?? 0
  - id: a6b7c8d9-0e1f-2a3b-4c5d-6e7f8a9b0c1d
    name: JSONSummaryWriter
    type: action
    action: FeatureWriter
    with:
      format: json
      converter: |
        if env.get("__features").is_empty() {
          []
        } else {
          let result = [];
          let feature = env.get("__features")[0];
          for key in feature.keys() {
            result.push(#{
              name: key,
              count: feature[key],
            });
          }
          result
        }
      output: |
        file::join_path(env.get("workerArtifactPath") ?? env.get("outputPath"), "summary_bldg.json")
  - id: 9f8e7d6c-5b4a-3928-1716-0f5e4d3c2b1a
    name: ZipFileWriter
    type: action
    action: ZipFileWriter
    with:
      output: |
        file::join_path(env.get("outputPath"), file::extract_filename_without_ext(env.get("cityGmlPath")) + "_qc_result.zip")
  edges:
  - id: 8c9e2f4a-7b1d-4e5c-a3f2-9d8b6c4e1a7f
    from: 4d7b9e2a-5c8f-41d6-b9a3-7e1c5f8d2b9a
    to: c7315341-26b3-4405-9d02-039d721cd225
    fromPort: default
    toPort: default
  - id: f3a7b2e5-4c8d-4f9a-bce2-5f1a8d3b9c6e
    from: c7315341-26b3-4405-9d02-039d721cd225
    to: 2aaa4ac9-2e79-479f-aa50-6543f461a76e
    fromPort: default
    toPort: default
  - id: 2d6e9b4c-a5f8-4e2d-b7c3-8a1f4e7b2d5c
    from: 2aaa4ac9-2e79-479f-aa50-6543f461a76e
    to: 0daf7972-4d58-4ccd-a576-f3dfc418f749
    fromPort: default
    toPort: default
  - id: 7a2e5c8f-3b9d-4c6a-e5f1-2d8c7b4a9e3f
    from: 0daf7972-4d58-4ccd-a576-f3dfc418f749
    to: 151fbadf-1b40-4264-a003-f6f11f6af2d6
    fromPort: default
    toPort: default
  - id: 9f4c7a2e-6b1d-4f8c-a2e5-3d9f6c8a1e4b
    from: 151fbadf-1b40-4264-a003-f6f11f6af2d6
    to: 7e833060-f8c4-458b-a8cc-8c817527f25b
    fromPort: default
    toPort: default
  - id: 4b7e2a9c-5f1d-4a8e-f2c6-7b4a1e8d5c9f
    from: 7e833060-f8c4-458b-a8cc-8c817527f25b
    to: 7c3e8b1f-2a9d-4f6c-8e5a-9b2d4f7c1e8a
    fromPort: default
    toPort: default
  - id: 3c8f1a5e-6b2d-4e9c-a7f4-1b8e5d2c9a6f
    from: 7c3e8b1f-2a9d-4f6c-8e5a-9b2d4f7c1e8a
    to: 3f7b2a9d-1c8e-4a6f-b5d3-9e2c7a4f8b1d
    fromPort: default
    toPort: default
  - id: 7f34f420-3b27-44a8-b83f-0ef80a86045e
    from: 3f7b2a9d-1c8e-4a6f-b5d3-9e2c7a4f8b1d
    to: a8a7e7f8-8d73-4078-9cff-4476924f2ad7
    fromPort: default
    toPort: default
  - id: 1cc52f00-2a52-4d4e-bc6a-c83629276766
    from: a8a7e7f8-8d73-4078-9cff-4476924f2ad7
    to: 5a7b1469-217a-4d4b-bb01-971a9f9140d8
    fromPort: default
    toPort: default
  - id: a4b7e1d9-2c8f-4a5b-d3e6-9c2a5b8e1d4f
    from: 5a7b1469-217a-4d4b-bb01-971a9f9140d8
    to: 7f3a8d2c-4e6b-4d9a-b1c5-3e8f2a7d9c4b
    fromPort: default
    toPort: default
  - id: 525487a5-0a23-4fa8-9767-41d429b87e9d
    from: 5a7b1469-217a-4d4b-bb01-971a9f9140d8
    to: 2b8c4e7a-9f1d-4a3b-c6e8-5d2a7b9c1e4f
    fromPort: default
    toPort: default
  - id: f8d2c5a9-3e1b-4c7f-a6d8-9b5e2c4f1a7d
    from: 2b8c4e7a-9f1d-4a3b-c6e8-5d2a7b9c1e4f
    to: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    fromPort: default
    toPort: default
  - id: 9c4e7a2f-6b1d-4e8c-a5f3-2d8c9b4a1e7f
    from: 2b8c4e7a-9f1d-4a3b-c6e8-5d2a7b9c1e4f
    to: 3e9f7c2a-8b4d-4e1f-a9c5-6b8e2c4a7d9f
    fromPort: buildingPart
    toPort: default
  - id: 050b179b-e063-4541-b08f-31ea54ceec0f
    from: 7c3e8b1f-2a9d-4f6c-8e5a-9b2d4f7c1e8a
    to: 7a561c34-2e94-4883-91e4-4026b09c2f8a
    fromPort: default
    toPort: default
  - id: b7c8d9e0-1f2a-3b4c-5d6e-7f8a9b0c1d2e
    from: 7c3e8b1f-2a9d-4f6c-8e5a-9b2d4f7c1e8a
    to: b1c2d3e4-5f6a-7b8c-9d0e-1f2a3b4c5d6e
    fromPort: default
    toPort: default
  - id: c8d9e0f1-2a3b-4c5d-6e7f-8a9b0c1d2e3f
    from: b1c2d3e4-5f6a-7b8c-9d0e-1f2a3b4c5d6e
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: default
    toPort: requestor
  - id: aa9b0c1d-2e3f-4a5b-6c7d-8e9f0a1b2c3d
    from: 7f3a8d2c-4e6b-4d9a-b1c5-3e8f2a7d9c4b
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: featureInstanceCountC02
    toPort: supplier
  - id: d9e0f1a2-3b4c-5d6e-7f8a-9b0c1d2e3f4a
    from: 7f3a8d2c-4e6b-4d9a-b1c5-3e8f2a7d9c4b
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountCityCode
    toPort: supplier
  - id: e9f0a1b2-4c5d-6e7f-8a9b-0c1d2e3f4a5b
    from: 3e9f7c2a-8b4d-4e1f-a9c5-6b8e2c4a7d9f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLbldg02
    toPort: supplier
  - id: a3b4c5d6-8e9f-0a1b-2c3d-4e5f6a7b8c9d
    from: 3e9f7c2a-8b4d-4e1f-a9c5-6b8e2c4a7d9f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod01BuildingPart
    toPort: supplier
  - id: f0a1b2c3-5d6e-7f8a-9b0c-1d2e3f4a5b6c
    from: 7f3a8d2c-4e6b-4d9a-b1c5-3e8f2a7d9c4b
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountL0405Bldg
    toPort: supplier
  - id: a1b2c3d4-6e7f-8a9b-0c1d-2e3f4a5b6c7d
    from: 7f3a8d2c-4e6b-4d9a-b1c5-3e8f2a7d9c4b
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountCBldg01
    toPort: supplier
  - id: b2c3d4e5-7f8a-9b0c-1d2e-3f4a5b6c7d8e
    from: 7f3a8d2c-4e6b-4d9a-b1c5-3e8f2a7d9c4b
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountMissingBuildingId
    toPort: supplier
  - id: c3d4e5f6-8a9b-0c1d-2e3f-4a5b6c7d8e9f
    from: 7a561c34-2e94-4883-91e4-4026b09c2f8a
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountInvalidBldgInstGeomType
    toPort: supplier
  - id: d4e5f6a7-9b0c-1d2e-3f4a-5b6c7d8e9f0a
    from: 7a561c34-2e94-4883-91e4-4026b09c2f8a
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLbldg06
    toPort: supplier
  - id: e5f6a7b8-0c1d-2e3f-4a5b-6c7d8e9f0a1b
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod0IncorrectOrientation
    toPort: supplier
  - id: f6a7b8c9-1d2e-3f4a-5b6c-7d8e9f0a1b2c
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod0InvalidSurface
    toPort: supplier
  - id: a7b8c9d0-2e3f-4a5b-6c7d-8e9f0a1b2c3d
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod0SurfaceIntersection
    toPort: supplier
  - id: b8c9d0e1-3f4a-5b6c-7d8e-9f0a1b2c3d4e
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod1InvalidSurface
    toPort: supplier
  - id: c9d0e1f2-4a5b-6c7d-8e9f-0a1b2c3d4e5f
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod1NotClosedSolid
    toPort: supplier
  - id: d0e1f2a3-5b6c-7d8e-9f0a-1b2c3d4e5f6a
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod1SolidIssues
    toPort: supplier
  - id: e1f2a3b4-6c7d-8e9f-0a1b-2c3d4e5f6a7b
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod2InvalidSurface
    toPort: supplier
  - id: e2f3a4b5-7c8d-9e0f-1a2b-3c4d5e6f7a8b
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod3InvalidSurface
    toPort: supplier
  - id: e3f4a5b6-8c9d-0e1f-2a3b-4c5d6e7f8a9b
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod4InvalidSurface
    toPort: supplier
  - id: f3a4b5c6-8d9e-0f1a-2b3c-4d5e6f7a8b9c
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod2NotClosedSolid
    toPort: supplier
  - id: f4a5b6c7-9d0e-1f2a-3b4c-5d6e7f8a9b0c
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod3NotClosedSolid
    toPort: supplier
  - id: f5a6b7c8-0e1f-2a3b-4c5d-6e7f8a9b0c1d
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod4NotClosedSolid
    toPort: supplier
  - id: f6a7b8c9-1f2a-3b4c-5d6e-7f8a9b0c1d2e
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod2SolidIssues
    toPort: supplier
  - id: f7a8b9c0-2f3a-4b5c-6d7e-8f9a0b1c2d3e
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod3SolidIssues
    toPort: supplier
  - id: f8a9b0c1-3f4a-5b6c-7d8e-9f0a1b2c3d4e
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountLod4SolidIssues
    toPort: supplier
  - id: f2a3b4c5-7d8e-9f0a-1b2c-3d4e5f6a7b8c
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    fromPort: errorCountIncorrectMeshcode
    toPort: supplier
  - id: e0f1a2b3-4c5d-6e7f-8a9b-0c1d2e3f4a5b
    from: c2d3e4f5-6a7b-8c9d-0e1f-2a3b4c5d6e7f
    to: d3e4f5a6-7b8c-9d0e-1f2a-3b4c5d6e7f8a
    fromPort: merged
    toPort: default
  - id: f1a2b3c4-5d6e-7f8a-9b0c-1d2e3f4a5b6c
    from: d3e4f5a6-7b8c-9d0e-1f2a-3b4c5d6e7f8a
    to: e4f5a6b7-8c9d-0e1f-2a3b-4c5d6e7f8a9b
    fromPort: default
    toPort: default
  - id: a2b3c4d5-6e7f-8a9b-0c1d-2e3f4a5b6c7d
    from: d3e4f5a6-7b8c-9d0e-1f2a-3b4c5d6e7f8a
    to: f5a6b7c8-9d0e-1f2a-3b4c-5d6e7f8a9b0c
    fromPort: default
    toPort: default
  - id: b3c4d5e6-7f8a-9b0c-1d2e-3f4a5b6c7d8e
    from: f5a6b7c8-9d0e-1f2a-3b4c-5d6e7f8a9b0c
    to: a6b7c8d9-0e1f-2a3b-4c5d-6e7f8a9b0c1d
    fromPort: default
    toPort: default
  - id: c4d5e6f7-8a9b-0c1d-2e3f-4a5b6c7d8e9f
    from: e4f5a6b7-8c9d-0e1f-2a3b-4c5d6e7f8a9b
    to: 9f8e7d6c-5b4a-3928-1716-0f5e4d3c2b1a
    fromPort: default
    toPort: default
  - id: d5e6f7a8-9b0c-1d2e-3f4a-5b6c7d8e9f0a
    from: a6b7c8d9-0e1f-2a3b-4c5d-6e7f8a9b0c1d
    to: 9f8e7d6c-5b4a-3928-1716-0f5e4d3c2b1a
    fromPort: default
    toPort: default
  - id: e6f7a8b9-0c1d-2e3f-4a5b-6c7d8e9f0a1b
    from: 7f3a8d2c-4e6b-4d9a-b1c5-3e8f2a7d9c4b
    to: 9f8e7d6c-5b4a-3928-1716-0f5e4d3c2b1a
    fromPort: fileOutput
    toPort: default
  - id: f7a8b9c0-1d2e-3f4a-5b6c-7d8e9f0a1b2c
    from: 7a561c34-2e94-4883-91e4-4026b09c2f8a
    to: 9f8e7d6c-5b4a-3928-1716-0f5e4d3c2b1a
    fromPort: fileOutput
    toPort: default
  - id: a8b9c0d1-2e3f-4a5b-6c7d-8e9f0a1b2c3d
    from: e9f2c5b8-3a7d-4c1e-8b6f-2d9a5c8e1b4f
    to: 9f8e7d6c-5b4a-3928-1716-0f5e4d3c2b1a
    fromPort: fileOutput
    toPort: default
  - id: b9c0d1e2-3f4a-5b6c-7d8e-9f0a1b2c3d4e
    from: 3e9f7c2a-8b4d-4e1f-a9c5-6b8e2c4a7d9f
    to: 9f8e7d6c-5b4a-3928-1716-0f5e4d3c2b1a
    fromPort: fileOutput
    toPort: default
