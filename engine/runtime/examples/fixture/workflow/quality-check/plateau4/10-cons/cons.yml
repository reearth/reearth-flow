# OtherConstruction quality check subgraph
# OtherConstruction supports LOD0-3 with Surface and Solid geometry
# LOD0: Surface topology validation + orientation check
# LOD1/2/3: Surface topology validation + Solid boundary validation
id: c0a1b2c3-d4e5-f6a7-b8c9-d0e1f2a3b4c5
name: "CONS.OtherConstructionValidation"
nodes:
  - id: a1b2c3d4-e5f6-7a8b-9c0d-1e2f3a4b5c70
    name: InputRouter
    type: action
    action: InputRouter
    with:
      routingPort: default

  # LOD splitter
  - id: b2c3d4e5-f6a7-8b9c-0d1e-2f3a4b5c6d70
    name: LodSplitterWithDM
    type: subGraph
    subGraphId: 7e98d856-1438-4148-bdcb-91747ef2e405

  # ===== Geometry Type Filters for LOD1-3 =====
  # GeometryFilter routes Surface→SurfaceValidator3D, Solid→SolidBoundaryValidator
  - id: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e01
    name: GeometryFilterLod1
    type: action
    action: GeometryFilter
    with:
      filterType: geometryType

  - id: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e02
    name: GeometryFilterLod2
    type: action
    action: GeometryFilter
    with:
      filterType: geometryType

  - id: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e03
    name: GeometryFilterLod3
    type: action
    action: GeometryFilter
    with:
      filterType: geometryType

  # ===== Surface Validation for LOD0-3 =====
  # SurfaceValidator3D for LOD0
  - id: c1d2e3f4-a5b6-7c8d-9e0f-1a2b3c4d5e6a
    name: SurfaceValidator3D_LOD0
    type: subGraph
    subGraphId: 8a5b1c9d-2e4f-4a3b-9c5d-1e6f8a2b4c7d

  # SurfaceValidator3D for LOD1
  - id: c2d3e4f5-b6c7-8d9e-0f1a-2b3c4d5e6f7b
    name: SurfaceValidator3D_LOD1
    type: subGraph
    subGraphId: 8a5b1c9d-2e4f-4a3b-9c5d-1e6f8a2b4c7d

  # SurfaceValidator3D for LOD2
  - id: c3d4e5f6-c7d8-9e0f-1a2b-3c4d5e6f7a8c
    name: SurfaceValidator3D_LOD2
    type: subGraph
    subGraphId: 8a5b1c9d-2e4f-4a3b-9c5d-1e6f8a2b4c7d

  # SurfaceValidator3D for LOD3
  - id: c4d5e6f7-d8e9-0f1a-2b3c-4d5e6f7a8b9d
    name: SurfaceValidator3D_LOD3
    type: subGraph
    subGraphId: 8a5b1c9d-2e4f-4a3b-9c5d-1e6f8a2b4c7d

  # ===== AttributeMapper for surface errors =====
  - id: d1e2f3a4-b5c6-7d8e-9f0a-1b2c3d4e5f6a
    name: AttributeMapperSurfaceErrors
    type: action
    action: AttributeMapper
    with:
      mappers:
        - attribute: Folder
          expr: |
            env.get("__value")["udxDirs"] ?? "cons"
        - attribute: Index
          expr: |
            env.get("__value")["fileIndex"] ?? ""
        - attribute: Filename
          expr: |
            env.get("__value")["gmlFilename"] ?? env.get("__value")["name"] ?? ""
        - attribute: FeatureType
          expr: |
            env.get("__value").featureTypeName ?? "OtherConstruction"
        - attribute: LOD
          expr: |
            env.get("__value")["lod"] ?? ""
        - attribute: "gml:id"
          expr: |
            env.get("__value")["featureId"] ?? env.get("__value")["gmlId"] ?? ""
        - attribute: エラー数
          expr: |
            1
        - attribute: エラー内容
          expr: |
            let value = env.get("__value");
            if value.validationResult?.details != () {
              return value.validationResult.details[0][0];
            }
            if "issue" in value {
              return value.issue;
            }
            "UnknownError"

  # ===== CSV Writer for surface errors =====
  - id: e1f2a3b4-c5d6-7e8f-9a0b-1c2d3e4f5a6a
    name: CsvWriterSurfaceErrors
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath"), "10_その他の構造物_面のエラー.csv")

  # ===== Surface error counter =====
  - id: f1a2b3c4-d5e6-7f8a-9b0c-1d2e3f4a5b6a
    name: SurfaceErrorCounter
    type: action
    action: StatisticsCalculator
    with:
      groupBy:
        - Filename
        - FeatureType
        - LOD
      calculations:
        - newAttribute: _num_surface_errors
          expr: "1"

  - id: 14a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5c6
    name: OutputRouterSurfaceErrors
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountSurfaceErrors

  # ===== Solid Boundary Validation (非水密立体検出) =====
  # SolidBoundaryValidator for LOD1,2,3
  - id: a101a2b3-c4d5-e6f7-a8b9-c0d1e2f3a4b5
    name: SolidBoundaryValidator
    type: action
    action: SolidBoundaryValidator
    with:
      tolerance: |
        0.01

  # Filter for NotClosed errors (NotA2Manifold = non-watertight solid)
  - id: a102b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c6
    name: FeatureFilterNotClosed
    type: action
    action: FeatureFilter
    with:
      conditions:
        - expr: |
            let issue = env.get("__value").solid_boundary_issues.issue;
            issue == "NotA2Manifold"
          outputPort: notClosed

  # AttributeMapper for NotClosed errors (lowercase format like wtr/bldg)
  - id: a103c4d5-e6f7-a8b9-c0d1-e2f3a4b5c6d7
    name: AttributeMapperNotClosed
    type: action
    action: AttributeMapper
    with:
      mappers:
        - attribute: filename
          expr: |
            env.get("__value").gmlFilename
        - attribute: feature_type
          expr: |
            env.get("__value").featureTypeName ?? "OtherConstruction"
        - attribute: lod
          expr: |
            env.get("__value").lod
        - attribute: gml_id
          expr: |
            env.get("__value").gmlId
        - attribute: issue
          expr: |
            "Surface Not Closed"

  # CSV Writer for NotClosed errors
  - id: a104d5e6-f7a8-b9c0-d1e2-f3a4b5c6d7e8
    name: FeatureWriterNotClosed
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath"), "10_その他の構造物_LOD1-3非水密立体.csv")

  # Error counter for NotClosed
  - id: a105e6f7-a8b9-c0d1-e2f3-a4b5c6d7e8f9
    name: NotClosedErrorCounter
    type: action
    action: StatisticsCalculator
    with:
      groupBy:
        - filename
        - feature_type
        - lod
      calculations:
        - newAttribute: _num_not_closed_solid
          expr: "1"

  - id: b4c5d6e7-f8a9-0b1c-2d3e-4f5a6b7c8d90
    name: OutputRouterNotClosed
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountNotClosedSolid

  # ===== Solid Issues (立体のその他のエラー) - OtherIssues from SolidBoundaryValidator =====
  # AttributeMapper for OtherIssues (unfiltered = not NotA2Manifold)
  - id: a119d1e2-f3a4-b5c6-d7e8-e9f0a1b2c3d4
    name: AttributeMapperSolidIssues
    type: action
    action: AttributeMapper
    with:
      mappers:
        - attribute: filename
          expr: |
            env.get("__value").gmlFilename
        - attribute: feature_type
          expr: |
            env.get("__value").featureTypeName ?? "OtherConstruction"
        - attribute: lod
          expr: |
            env.get("__value").lod
        - attribute: gml_id
          expr: |
            env.get("__value").gmlId
        - attribute: issue
          expr: |
            "InvalidSolidBoundaries"

  # CSV Writer for Solid Issues (立体のその他のエラー)
  - id: a120e2f3-a4b5-c6d7-e8f9-f0a1b2c3d4e5
    name: FeatureWriterSolidIssues
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath"), "10_その他の構造物_LOD1-3立体のエラー.csv")

  # Error counter for Solid Issues
  - id: a121f3a4-b5c6-d7e8-f9a0-a1b2c3d4e5f6
    name: SolidIssuesErrorCounter
    type: action
    action: StatisticsCalculator
    with:
      groupBy:
        - filename
        - feature_type
        - lod
      calculations:
        - newAttribute: _num_other_solid_errors
          expr: "1"

  # Orientation errors (面の向き不正) - LOD0 only
  - id: d2e3f4a5-b6c7-8d9e-0f1a-2b3c4d5e6f7d
    name: AttributeMapperOrientationErrors
    type: action
    action: AttributeMapper
    with:
      mappers:
        - attribute: Folder
          expr: |
            env.get("__value")["udxDirs"] ?? "cons"
        - attribute: Index
          expr: |
            env.get("__value")["fileIndex"] ?? ""
        - attribute: Filename
          expr: |
            env.get("__value")["gmlFilename"] ?? env.get("__value")["name"] ?? ""
        - attribute: FeatureType
          expr: |
            env.get("__value").featureTypeName ?? "OtherConstruction"
        - attribute: LOD
          expr: |
            env.get("__value")["lod"] ?? "0"
        - attribute: "gml:id"
          expr: |
            env.get("__value")["gmlId"] ?? env.get("__value")["featureId"] ?? ""
        - attribute: エラー数
          expr: |
            1
        - attribute: エラー内容
          expr: |
            "Incorrect Orientation"
        - attribute: 面の向き
          expr: |
            "right_hand_rule"

  - id: e3f4a5b6-c7d8-9e0f-1a2b-3c4d5e6f7a8e
    name: CsvWriterOrientationErrors
    type: action
    action: FeatureWriter
    with:
      format: csv
      output: |
        file::join_path(env.get("workerArtifactPath"), "10_その他の構造物_面の向き不正.csv")

  - id: 15a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5c7
    name: OrientationErrorCounter
    type: action
    action: StatisticsCalculator
    with:
      groupBy:
        - Filename
        - FeatureType
        - LOD
      calculations:
        - newAttribute: _num_orientation_errors
          expr: "1"

  - id: 16a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5c8
    name: OutputRouterOrientationErrors
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountOrientationErrors

  - id: f4a5b6c7-d8e9-0f1a-2b3c-4d5e6f7a8b9a
    name: OutputRouterFileOutputOrientationErrors
    type: action
    action: OutputRouter
    with:
      routingPort: fileOutput

  # OutputRouter for Solid Errors
  - id: 18a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5d0
    name: OutputRouterSolidErrors
    type: action
    action: OutputRouter
    with:
      routingPort: errorCountSolidErrors

  # File output router
  - id: a9b0c1d2-e3f4-5a6b-7c8d-9e0f1a2b3c50
    name: OutputRouterFileOutput
    type: action
    action: OutputRouter
    with:
      routingPort: fileOutput

edges:
  # Input → LodSplitter
  - id: 01a2b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c7
    from: a1b2c3d4-e5f6-7a8b-9c0d-1e2f3a4b5c70
    to: b2c3d4e5-f6a7-8b9c-0d1e-2f3a4b5c6d70
    fromPort: default
    toPort: default

  # ===== LOD outputs → SurfaceValidator3D =====
  # LOD0 → SurfaceValidator3D_LOD0
  - id: 02b3c4d5-e6f7-a8b9-c0d1-e2f3a4b5c6d8
    from: b2c3d4e5-f6a7-8b9c-0d1e-2f3a4b5c6d70
    to: c1d2e3f4-a5b6-7c8d-9e0f-1a2b3c4d5e6a
    fromPort: lod0
    toPort: default

  # LOD1 → GeometryFilterLod1
  - id: 03c4d5e6-f7a8-b9c0-d1e2-f3a4b5c6d7e9
    from: b2c3d4e5-f6a7-8b9c-0d1e-2f3a4b5c6d70
    to: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e01
    fromPort: lod1
    toPort: default

  # LOD2 → GeometryFilterLod2
  - id: 04d5e6f7-a8b9-c0d1-e2f3-a4b5c6d7e8f0
    from: b2c3d4e5-f6a7-8b9c-0d1e-2f3a4b5c6d70
    to: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e02
    fromPort: lod2
    toPort: default

  # LOD3 → GeometryFilterLod3
  - id: 05e6f7a8-b9c0-d1e2-f3a4-b5c6d7e8f9a1
    from: b2c3d4e5-f6a7-8b9c-0d1e-2f3a4b5c6d70
    to: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e03
    fromPort: lod3
    toPort: default

  # GeometryFilterLod1 surface → SurfaceValidator3D_LOD1
  - id: e5f6a7b8-c9d0-1e2f-3a4b-5c6d7e8f9a02
    from: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e01
    to: c2d3e4f5-b6c7-8d9e-0f1a-2b3c4d5e6f7b
    fromPort: surface
    toPort: default

  # GeometryFilterLod2 surface → SurfaceValidator3D_LOD2
  - id: e5f6a7b8-c9d0-1e2f-3a4b-5c6d7e8f9a05
    from: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e02
    to: c3d4e5f6-c7d8-9e0f-1a2b-3c4d5e6f7a8c
    fromPort: surface
    toPort: default

  # GeometryFilterLod3 surface → SurfaceValidator3D_LOD3
  - id: e5f6a7b8-c9d0-1e2f-3a4b-5c6d7e8f9a08
    from: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e03
    to: c4d5e6f7-d8e9-0f1a-2b3c-4d5e6f7a8b9d
    fromPort: surface
    toPort: default

  # ===== SurfaceValidator3D invalidSurface outputs → AttributeMapper =====
  # LOD0 invalidSurface → AttributeMapper
  - id: 11a2b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c8
    from: c1d2e3f4-a5b6-7c8d-9e0f-1a2b3c4d5e6a
    to: d1e2f3a4-b5c6-7d8e-9f0a-1b2c3d4e5f6a
    fromPort: invalidSurface
    toPort: default

  # LOD1 invalidSurface → AttributeMapper
  - id: 12b3c4d5-e6f7-a8b9-c0d1-e2f3a4b5c6d9
    from: c2d3e4f5-b6c7-8d9e-0f1a-2b3c4d5e6f7b
    to: d1e2f3a4-b5c6-7d8e-9f0a-1b2c3d4e5f6a
    fromPort: invalidSurface
    toPort: default

  # LOD2 invalidSurface → AttributeMapper
  - id: 13c4d5e6-f7a8-b9c0-d1e2-f3a4b5c6d7ea
    from: c3d4e5f6-c7d8-9e0f-1a2b-3c4d5e6f7a8c
    to: d1e2f3a4-b5c6-7d8e-9f0a-1b2c3d4e5f6a
    fromPort: invalidSurface
    toPort: default

  # LOD3 invalidSurface → AttributeMapper
  - id: 14d5e6f7-a8b9-c0d1-e2f3-a4b5c6d7e8fb
    from: c4d5e6f7-d8e9-0f1a-2b3c-4d5e6f7a8b9d
    to: d1e2f3a4-b5c6-7d8e-9f0a-1b2c3d4e5f6a
    fromPort: invalidSurface
    toPort: default

  # ===== AttributeMapper → CsvWriter =====
  - id: 21a2b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c9
    from: d1e2f3a4-b5c6-7d8e-9f0a-1b2c3d4e5f6a
    to: e1f2a3b4-c5d6-7e8f-9a0b-1c2d3e4f5a6a
    fromPort: default
    toPort: default

  # ===== CsvWriter → OutputRouterFileOutput =====
  - id: 22b3c4d5-e6f7-a8b9-c0d1-e2f3a4b5c6da
    from: e1f2a3b4-c5d6-7e8f-9a0b-1c2d3e4f5a6a
    to: a9b0c1d2-e3f4-5a6b-7c8d-9e0f1a2b3c50
    fromPort: default
    toPort: default

  # ===== AttributeMapper → SurfaceErrorCounter =====
  - id: 23c4d5e6-f7a8-b9c0-d1e2-f3a4b5c6d7eb
    from: d1e2f3a4-b5c6-7d8e-9f0a-1b2c3d4e5f6a
    to: f1a2b3c4-d5e6-7f8a-9b0c-1d2e3f4a5b6a
    fromPort: default
    toPort: default

  # ===== SurfaceErrorCounter → OutputRouterSurfaceErrors =====
  - id: 24d5e6f7-a8b9-c0d1-e2f3-a4b5c6d7e8fc
    from: f1a2b3c4-d5e6-7f8a-9b0c-1d2e3f4a5b6a
    to: 14a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5c6
    fromPort: default
    toPort: default

  # ===== GeometryFilter solid → SolidBoundaryValidator edges =====
  # GeometryFilterLod1 solid → SolidBoundaryValidator
  - id: e5f6a7b8-c9d0-1e2f-3a4b-5c6d7e8f9a03
    from: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e01
    to: a101a2b3-c4d5-e6f7-a8b9-c0d1e2f3a4b5
    fromPort: solid
    toPort: default

  # GeometryFilterLod2 solid → SolidBoundaryValidator
  - id: e5f6a7b8-c9d0-1e2f-3a4b-5c6d7e8f9a06
    from: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e02
    to: a101a2b3-c4d5-e6f7-a8b9-c0d1e2f3a4b5
    fromPort: solid
    toPort: default

  # GeometryFilterLod3 solid → SolidBoundaryValidator
  - id: e5f6a7b8-c9d0-1e2f-3a4b-5c6d7e8f9a09
    from: c5d6e7f8-a9b0-1c2d-3e4f-5a6b7c8d9e03
    to: a101a2b3-c4d5-e6f7-a8b9-c0d1e2f3a4b5
    fromPort: solid
    toPort: default

  # SolidBoundaryValidator (failed) → FeatureFilterNotClosed
  - id: a113d5e6-f7a8-b9c0-d1e2-f3a4b5c6d7e8
    from: a101a2b3-c4d5-e6f7-a8b9-c0d1e2f3a4b5
    to: a102b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c6
    fromPort: failed
    toPort: default

  # FeatureFilterNotClosed (notClosed) → AttributeMapperNotClosed
  - id: a114e6f7-a8b9-c0d1-e2f3-a4b5c6d7e8f9
    from: a102b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c6
    to: a103c4d5-e6f7-a8b9-c0d1-e2f3a4b5c6d7
    fromPort: notClosed
    toPort: default

  # AttributeMapperNotClosed → FeatureWriterNotClosed
  - id: a115f7a8-b9c0-d1e2-f3a4-b5c6d7e8f9a0
    from: a103c4d5-e6f7-a8b9-c0d1-e2f3a4b5c6d7
    to: a104d5e6-f7a8-b9c0-d1e2-f3a4b5c6d7e8
    fromPort: default
    toPort: default

  # FeatureWriterNotClosed → OutputRouterFileOutput
  - id: a116a8b9-c0d1-e2f3-a4b5-c6d7e8f9a0b1
    from: a104d5e6-f7a8-b9c0-d1e2-f3a4b5c6d7e8
    to: a9b0c1d2-e3f4-5a6b-7c8d-9e0f1a2b3c50
    fromPort: default
    toPort: default

  # AttributeMapperNotClosed → NotClosedErrorCounter
  - id: a117b9c0-d1e2-f3a4-b5c6-d7e8f9a0b1c2
    from: a103c4d5-e6f7-a8b9-c0d1-e2f3a4b5c6d7
    to: a105e6f7-a8b9-c0d1-e2f3-a4b5c6d7e8f9
    fromPort: default
    toPort: default

  # NotClosedErrorCounter → OutputRouterNotClosed
  - id: a118c0d1-e2f3-a4b5-c6d7-e8f9a0b1c2d3
    from: a105e6f7-a8b9-c0d1-e2f3-a4b5c6d7e8f9
    to: b4c5d6e7-f8a9-0b1c-2d3e-4f5a6b7c8d90
    fromPort: default
    toPort: default

  # ===== Solid Issues (立体のその他のエラー) edges =====
  # FeatureFilterNotClosed (unfiltered) → AttributeMapperSolidIssues
  - id: a119e2f3-a4b5-c6d7-e8f9-f0a1b2c3d4e5
    from: a102b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c6
    to: a119d1e2-f3a4-b5c6-d7e8-e9f0a1b2c3d4
    fromPort: unfiltered
    toPort: default

  # AttributeMapperSolidIssues → FeatureWriterSolidIssues
  - id: a120f3a4-b5c6-d7e8-f9a0-a1b2c3d4e5f6
    from: a119d1e2-f3a4-b5c6-d7e8-e9f0a1b2c3d4
    to: a120e2f3-a4b5-c6d7-e8f9-f0a1b2c3d4e5
    fromPort: default
    toPort: default

  # FeatureWriterSolidIssues → OutputRouterFileOutput
  - id: a121a4b5-c6d7-e8f9-a0b1-b2c3d4e5f6a7
    from: a120e2f3-a4b5-c6d7-e8f9-f0a1b2c3d4e5
    to: a9b0c1d2-e3f4-5a6b-7c8d-9e0f1a2b3c50
    fromPort: default
    toPort: default

  # AttributeMapperSolidIssues → SolidIssuesErrorCounter
  - id: a122b5c6-d7e8-f9a0-b1c2-c3d4e5f6a7b8
    from: a119d1e2-f3a4-b5c6-d7e8-e9f0a1b2c3d4
    to: a121f3a4-b5c6-d7e8-f9a0-a1b2c3d4e5f6
    fromPort: default
    toPort: default

  # SolidIssuesErrorCounter → OutputRouterSolidErrors
  - id: a123c6d7-e8f9-a0b1-c2d3-d4e5f6a7b8c9
    from: a121f3a4-b5c6-d7e8-f9a0-a1b2c3d4e5f6
    to: 18a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5d0
    fromPort: default
    toPort: default

  # ===== Orientation errors (面の向き不正) - LOD0 only =====
  # SurfaceValidator3D_LOD0 inCorrectOrientation → AttributeMapperOrientationErrors
  - id: 25a2b3c4-d5e6-f7a8-b9c0-d1e2f3a4b5c0
    from: c1d2e3f4-a5b6-7c8d-9e0f-1a2b3c4d5e6a
    to: d2e3f4a5-b6c7-8d9e-0f1a-2b3c4d5e6f7d
    fromPort: inCorrectOrientation
    toPort: default

  # AttributeMapperOrientationErrors → CsvWriterOrientationErrors
  - id: 26b3c4d5-e6f7-a8b9-c0d1-e2f3a4b5c6d1
    from: d2e3f4a5-b6c7-8d9e-0f1a-2b3c4d5e6f7d
    to: e3f4a5b6-c7d8-9e0f-1a2b-3c4d5e6f7a8e
    fromPort: default
    toPort: default

  # CsvWriterOrientationErrors → OutputRouterFileOutputOrientationErrors
  - id: 27c4d5e6-f7a8-b9c0-d1e2-f3a4b5c6d7e2
    from: e3f4a5b6-c7d8-9e0f-1a2b-3c4d5e6f7a8e
    to: f4a5b6c7-d8e9-0f1a-2b3c-4d5e6f7a8b9a
    fromPort: default
    toPort: default

  # AttributeMapperOrientationErrors → OrientationErrorCounter
  - id: 28d5e6f7-a8b9-c0d1-e2f3-a4b5c6d7e8f3
    from: d2e3f4a5-b6c7-8d9e-0f1a-2b3c4d5e6f7d
    to: 15a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5c7
    fromPort: default
    toPort: default

  # OrientationErrorCounter → OutputRouterOrientationErrors
  - id: 14f5a6b7-c8d9-e0f1-a2b3-c4d5e6f7a8c0
    from: 15a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5c7
    to: 16a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5c8
    fromPort: default
    toPort: default

ports:
  outputs:
    - id: errorCountNotClosedSolid
      nodeId: b4c5d6e7-f8a9-0b1c-2d3e-4f5a6b7c8d90
      port: default
    - id: errorCountSurfaceErrors
      nodeId: 14a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5c6
      port: default
    - id: errorCountOrientationErrors
      nodeId: 16a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5c8
      port: default
    - id: errorCountSolidErrors
      nodeId: 18a5b5c5-d5e5-f5a5-b5c5-d5e5f5a5b5d0
      port: default
    - id: fileOutput
      nodeId: a9b0c1d2-e3f4-5a6b-7c8d-9e0f1a2b3c50
      port: default
