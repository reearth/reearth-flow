@import "tailwindcss";

@config '../tailwind.config.ts';

@utility no-scrollbar {
  /* Chrome, Safari and Opera */
  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

@layer utilities {
  :root {
    font-family: Inter, "Noto Sans JP", sans-serif;
    font-feature-settings:
      "liga" 1,
      "calt" 1; /* fix for Chrome */
  }
}

@layer base {
  /* Light theme (default) */
  :root,
  [data-theme="light"] {
    --background: oklch(95% 0.005 250); /* softer cool gray - less bright */
    --foreground: oklch(25% 0.008 270); /* darker text for better contrast */
    --card: oklch(97% 0.004 240); /* lighter than background for elevation */
    --card-foreground: oklch(25% 0.008 270);
    --popover: oklch(98% 0.003 250); /* elevated popover */
    --popover-foreground: oklch(25% 0.008 270);
    --primary: oklch(90% 0.01 260); /* more visible primary against softer bg */
    --primary-foreground: oklch(25% 0.008 270);
    --secondary: oklch(96% 0.006 270); /* clear distinction from background */
    --secondary-foreground: oklch(25% 0.008 270);
    --muted: oklch(88% 0.008 270); /* more contrast for muted elements */
    --muted-foreground: oklch(45% 0.01 270);
    --accent: oklch(85% 0.018 280); /* more defined accent */
    --accent-foreground: oklch(25% 0.01 280);
    --destructive: oklch(62% 0.22 25); /* red */
    --destructive-foreground: oklch(98.5% 0 0);
    --warning: oklch(75% 0.15 65); /* orange */
    --warning-foreground: oklch(98.5% 0 0);
    --border: oklch(82% 0.008 260); /* more visible borders */
    --border-secondary: oklch(72% 0.01 260);
    --input: oklch(98% 0.004 270); /* lighter input for clear distinction */
    --ring: oklch(16% 0.01 270);
    --radius: 0.5rem;
    /* Custom Flow colors */
    --logo: oklch(70% 0.16 155); /* pastel green for light mode */
    /* Workflow colors - lighter & moderately saturated for light mode */
    --node-entrance: oklch(65% 0.18 320); /* light purple */
    --node-exit: oklch(63% 0.18 290); /* light violet */
    --node-reader: oklch(55% 0.09 230); /* light teal */
    --node-transformer: oklch(52% 0.14 15); /* light burgundy */
    --node-writer: oklch(60% 0.07 85.875); /* light olive/brown */
    --node-subworkflow: oklch(60% 0.16 310); /* light purple */
    /* Selected Node colors - brighter & more saturated */
    --node-reader-selected: oklch(70% 0.2 230);
    --node-transformer-selected: oklch(67% 0.25 15);
    --node-writer-selected: oklch(72% 0.18 85.875);
    --node-subworkflow-selected: oklch(65% 0.2 320);
    /* success green */
    --success: oklch(72% 0.18 145);
  }
  .dark,
  [data-theme="dark"] {
    --background: oklch(
      26% 0.003 270
    ); /* dark gray with barely visible cool tint */
    --foreground: oklch(97% 0.002 270); /* near white with hint of warmth */
    --card: oklch(23% 0.003 270); /* darker gray card */
    --card-foreground: oklch(97% 0.002 270);
    --popover: oklch(29% 0.004 270); /* slightly lighter popover */
    --popover-foreground: oklch(97% 0.002 270);
    --primary: oklch(32% 0.006 270); /* dark primary with subtle tint */
    --primary-foreground: oklch(55% 0.006 270);
    --secondary: oklch(23% 0.003 270); /* dark secondary */
    --secondary-foreground: oklch(97% 0.002 270);
    --muted: oklch(18% 0.002 270); /* very dark muted */
    --muted-foreground: oklch(68% 0.006 270);
    --accent: oklch(38% 0.008 275); /* subtle accent with cool tint */
    --accent-foreground: oklch(85% 0.006 270);
    --destructive: oklch(62% 0.22 25); /* red */
    --destructive-foreground: oklch(98.5% 0 0);
    --border: oklch(38% 0.006 270); /* border with subtle cool tint */
    --input: oklch(18% 0.002 270); /* darker input */
    --ring: oklch(12% 0.004 270); /* subtle ring */
    /* Custom Flow colors */
    --logo: oklch(68% 0.17 155); /* softer pastel green for dark mode */
    /* Workflow colors - slightly softer pastels */
    --node-entrance: oklch(60% 0.2 320); /* softer purple */
    --node-exit: oklch(58% 0.2 290); /* softer violet */
    --node-reader: oklch(50% 0.1 230); /* softer teal */
    --node-transformer: oklch(48% 0.15 15); /* softer burgundy */
    --node-writer: oklch(55% 0.08 85.875); /* softer olive/brown */
    --node-subworkflow: oklch(55% 0.18 310); /* softer purple */
    /* Selected Node colors - brighter pastels */
    --node-reader-selected: oklch(65% 0.2 230);
    --node-transformer-selected: oklch(63% 0.25 15);
    --node-writer-selected: oklch(68% 0.16 85.875);
    --node-subworkflow-selected: oklch(60% 0.22 320);
  }

  /* Midnight theme - Extra dark for OLED and night work */
  [data-theme="midnight"] {
    --background: oklch(15% 0.008 270); /* deep dark blue-black */
    --foreground: oklch(92% 0.005 260); /* soft light text */
    --card: oklch(18% 0.01 270); /* slightly elevated dark */
    --card-foreground: oklch(92% 0.005 260);
    --popover: oklch(20% 0.012 270); /* elevated surfaces */
    --popover-foreground: oklch(92% 0.005 260);
    --primary: oklch(25% 0.015 275); /* dark muted primary */
    --primary-foreground: oklch(85% 0.008 270);
    --secondary: oklch(17% 0.008 270); /* very dark secondary */
    --secondary-foreground: oklch(92% 0.005 260);
    --muted: oklch(22% 0.01 275); /* dark muted */
    --muted-foreground: oklch(65% 0.008 270);
    --accent: oklch(30% 0.02 280); /* subtle accent */
    --accent-foreground: oklch(88% 0.008 270);
    --destructive: oklch(62% 0.22 25); /* red */
    --destructive-foreground: oklch(98.5% 0 0);
    --warning: oklch(75% 0.15 65); /* orange */
    --warning-foreground: oklch(98.5% 0 0);
    --border: oklch(28% 0.012 275); /* subtle dark border */
    --border-secondary: oklch(35% 0.015 275);
    --input: oklch(12% 0.006 270); /* very dark input */
    --ring: oklch(40% 0.03 280); /* visible but subdued ring */
    /* Custom Flow colors - same as dark theme */
    --logo: oklch(68% 0.17 155);
    --node-entrance: oklch(60% 0.2 320);
    --node-exit: oklch(58% 0.2 290);
    --node-reader: oklch(50% 0.1 230);
    --node-transformer: oklch(48% 0.15 15);
    --node-writer: oklch(55% 0.08 85.875);
    --node-subworkflow: oklch(55% 0.18 310);
    --node-reader-selected: oklch(65% 0.2 230);
    --node-transformer-selected: oklch(63% 0.25 15);
    --node-writer-selected: oklch(68% 0.16 85.875);
    --node-subworkflow-selected: oklch(60% 0.22 320);
    --success: oklch(72% 0.18 145);
  }

  /* Synthwave theme - Neon 80s vibes */
  [data-theme="synthwave"] {
    --background: oklch(22% 0.025 280); /* deep purple-blue base */
    --foreground: oklch(92% 0.03 300); /* soft lavender text */
    --card: oklch(25% 0.03 280); /* slightly elevated purple */
    --card-foreground: oklch(92% 0.03 300);
    --popover: oklch(28% 0.035 280); /* elevated surfaces */
    --popover-foreground: oklch(92% 0.03 300);
    --primary: oklch(60% 0.2 320); /* vibrant pink */
    --primary-foreground: oklch(98.5% 0 0);
    --secondary: oklch(30% 0.04 280); /* muted purple secondary */
    --secondary-foreground: oklch(92% 0.03 300);
    --muted: oklch(32% 0.04 280); /* muted purple */
    --muted-foreground: oklch(70% 0.025 300);
    --accent: oklch(65% 0.18 195); /* cyan accent */
    --accent-foreground: oklch(20% 0.025 280);
    --destructive: oklch(62% 0.22 25); /* red */
    --destructive-foreground: oklch(98.5% 0 0);
    --warning: oklch(70% 0.18 85); /* warm yellow-orange */
    --warning-foreground: oklch(20% 0.025 280);
    --border: oklch(40% 0.08 280); /* purple border */
    --border-secondary: oklch(45% 0.1 280);
    --input: oklch(20% 0.025 280); /* dark purple input */
    --ring: oklch(60% 0.2 320); /* pink ring */
    /* Custom Flow colors - same as dark theme for consistency */
    --logo: oklch(68% 0.17 155);
    --node-entrance: oklch(60% 0.2 320);
    --node-exit: oklch(58% 0.2 290);
    --node-reader: oklch(50% 0.1 230);
    --node-transformer: oklch(48% 0.15 15);
    --node-writer: oklch(55% 0.08 85.875);
    --node-subworkflow: oklch(55% 0.18 310);
    --node-reader-selected: oklch(65% 0.2 230);
    --node-transformer-selected: oklch(63% 0.25 15);
    --node-writer-selected: oklch(68% 0.16 85.875);
    --node-subworkflow-selected: oklch(60% 0.22 320);
    --success: oklch(72% 0.18 145);
    --canvas-background: oklch(18% 0.02 280); /* deep purple canvas */
  }

  /* Terminal theme - Classic green phosphor CRT */
  [data-theme="terminal"] {
    --background: oklch(12% 0.01 145); /* very dark green-black */
    --foreground: oklch(75% 0.15 145); /* bright phosphor green */
    --card: oklch(15% 0.012 145); /* slightly lighter dark green */
    --card-foreground: oklch(75% 0.15 145);
    --popover: oklch(18% 0.015 145); /* elevated dark green */
    --popover-foreground: oklch(75% 0.15 145);
    --primary: oklch(25% 0.02 145); /* dark muted green */
    --primary-foreground: oklch(80% 0.18 145); /* bright green */
    --secondary: oklch(14% 0.01 145); /* subtle secondary */
    --secondary-foreground: oklch(75% 0.15 145);
    --muted: oklch(20% 0.015 145); /* muted green */
    --muted-foreground: oklch(55% 0.12 145); /* dimmed green */
    --accent: oklch(30% 0.025 145); /* brighter green accent */
    --accent-foreground: oklch(85% 0.2 145); /* vivid green */
    --destructive: oklch(55% 0.18 25); /* red error (darker for terminal) */
    --destructive-foreground: oklch(85% 0.2 145); /* green text on red */
    --warning: oklch(65% 0.15 100); /* amber warning */
    --warning-foreground: oklch(15% 0.01 145);
    --border: oklch(28% 0.02 145); /* visible green border */
    --border-secondary: oklch(35% 0.025 145);
    --input: oklch(10% 0.008 145); /* darker input */
    --ring: oklch(60% 0.18 145); /* bright green ring */
    /* Custom Flow colors - all in green spectrum */
    --logo: oklch(70% 0.16 145); /* green logo */
    /* Workflow colors - slightly softer pastels */
    --node-entrance: oklch(60% 0.2 320); /* softer purple */
    --node-exit: oklch(58% 0.2 290); /* softer violet */
    --node-reader: oklch(50% 0.1 230); /* softer teal */
    --node-transformer: oklch(48% 0.15 15); /* softer burgundy */
    --node-writer: oklch(55% 0.08 85.875); /* softer olive/brown */
    --node-subworkflow: oklch(55% 0.18 310); /* softer purple */
    /* Selected Node colors - brighter pastels */
    --node-reader-selected: oklch(65% 0.2 230);
    --node-transformer-selected: oklch(63% 0.25 15);
    --node-writer-selected: oklch(68% 0.16 85.875);
    --node-subworkflow-selected: oklch(60% 0.22 320);
    --success: oklch(86.687% 0.29129 142.889); /* bright success green */
  }
}
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--border);
  }

  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }

  * {
    @apply no-scrollbar;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* Animation for active node - shadow */
@keyframes cycleActiveColorsShadow {
  0% {
    box-shadow: 0 0 5px 2px var(--primary);
  }
  25% {
    box-shadow: 0 0 5px 2px var(--success);
  }
  50% {
    box-shadow: 0 0 5px 2px var(--warning);
  }
  75% {
    box-shadow: 0 0 5px 2px var(--destructive);
  }
  100% {
    box-shadow: 0 0 5px 2px var(--primary);
  }
}

/* Animation for active node */
@keyframes cycleActiveColors {
  0% {
    background-color: theme("colors.primary.DEFAULT");
  }
  25% {
    background-color: theme("colors.success");
  }
  50% {
    background-color: theme("colors.warning.DEFAULT");
  }
  75% {
    background-color: theme("colors.destructive.DEFAULT");
  }
  100% {
    background-color: theme("colors.primary.DEFAULT");
  }
}

/* Animation for active node - border */
@keyframes cycleActiveColorsBorder {
  0% {
    border-color: var(--primary);
  }
  25% {
    border-color: var(--success);
  }
  50% {
    border-color: var(--warning);
  }
  75% {
    border-color: var(--destructive);
  }
  100% {
    border-color: var(--primary);
  }
}

@keyframes pulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.pulse {
  animation: pulse 1.5s infinite;
}

.active-node-status {
  animation: cycleActiveColors 3s infinite linear;
  /* pulse 1.5s infinite; */
}

.active-node-status-shadow {
  animation: cycleActiveColorsShadow 3s infinite linear;
  /* pulse 1.5s infinite; */
}

.active-node-status-border {
  animation: cycleActiveColorsBorder 3s infinite linear;
  /* pulse 1.5s infinite; */
}

/* Allows for react flow logo to displayed without style conflicts */
.react-flow__attribution {
  background: none !important;
}

/* Animation for queued node - shadow */
@keyframes cycleColorsShadow {
  0% {
    box-shadow: 0 0 5px 2px var(--foreground);
  }
  50% {
    box-shadow: 0 0 5px 2px var(--primary);
  }
  100% {
    box-shadow: 0 0 5px 2px var(--foreground);
  }
}

/* Animation for queued node - background */
@keyframes cycleColors {
  0% {
    background-color: var(--foreground);
  }
  50% {
    background-color: var(--primary);
  }
  100% {
    background-color: var(--foreground);
  }
}

/* Animation for queued node - border */
@keyframes cycleColorsBorder {
  0% {
    border-color: var(--foreground);
  }
  50% {
    border-color: var(--primary);
  }
  100% {
    border-color: var(--foreground);
  }
}

.queued-node-status {
  animation:
    cycleColors 3s infinite,
    pulse 1.5s infinite;
}

.queued-node-status-shadow {
  animation: cycleColorsShadow 3s infinite linear;
}

.queued-node-status-border {
  animation: cycleColorsBorder 3s infinite linear;
}

/* Animation for queued node END */

/* We need to set the z-index to -1 so that the nodes are rendered behind the edges */
.react-flow__node-batch {
  z-index: -1 !important;
}

.react-flow__node-note {
  z-index: -1 !important;
}

#cesiumContainer {
  clip-path: inset(0 round calc(var(--radius) /* 0.25rem = 4px */ - 2px));
}
